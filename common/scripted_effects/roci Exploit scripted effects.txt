#Country Scope
game_start_colonies = {
	set_variable = { which = exploit_start_colonies value = 4 }
	capital_scope = {
		set_planet_flag = exploit_center
		if = {
			limit = {
				is_moon = no
			}
			log = "Selected Exploit Center is not a Moon for \\[ROOT.GetName]"
			log = "Remaining Starting colonies \\[ROOT.exploit_start_colonies] for \\[ROOT.GetName]"
			every_moon = {
				limit = {
					ROOT = { check_variable = { which = exploit_start_colonies value > 0 } }
					NOR = {
						has_modifier = colonized_planet
						is_colony = yes
						is_colonizable = yes
					}
				}
				log = "Colonized a Moon of the capital for \\[ROOT.GetName]"
				ROOT = { change_variable = { which = exploit_start_colonies value = -1 } }
				add_modifier = { modifier = building_thing }
				if = {
					limit = {
						NOT = { has_modifier = colonized_planet }
					}
					add_modifier = { modifier = colonized_planet }
				}
				set_variable = { which = exploitation_size value = 0 }
				new_colony_setup = yes
				breakdown_deposits = yes
				exploit_size_set = yes
				switch = {
					trigger = is_planet_class
					pc_shattered = {
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.502 }
						planet_event = { id = spaceexploit.502 }
						planet_event = { id = spaceexploit.502 }
						random_list = {
							1 = { planet_event = { id = spaceexploit.502 } }
							1 = { }
						}
						planet_event = { id = spaceexploit.5 }
					}
					pc_frozen = {
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.102 }
						planet_event = { id = spaceexploit.102 }
						planet_event = { id = spaceexploit.102 }
						random_list = {
							1 = { planet_event = { id = spaceexploit.102 } }
							1 = { }
						}
						planet_event = { id = spaceexploit.1 }
					}
					pc_molten = {
						planet_event = { id = spaceexploit.1002 }
						planet_event = { id = spaceexploit.1002 }
						planet_event = { id = spaceexploit.1002 }
						random_list = {
							1 = { planet_event = { id = spaceexploit.1002 } }
							1 = { }
						}
						planet_event = { id = spaceexploit.10 }
					}
					pc_barren = {
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.1202 }
						random_list = {
							1 = {
								planet_event = { id = spaceexploit.1202 }
								planet_event = { id = spaceexploit.202 }
							}
							1 = { }
						}
						planet_event = { id = spaceexploit.12 }
					}
					pc_barren_cold = {
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.1202 }
						random_list = {
							1 = {
								planet_event = { id = spaceexploit.1202 }
								planet_event = { id = spaceexploit.202 }
							}
							1 = { }
						}
						planet_event = { id = spaceexploit.12 }
					}
					pc_toxic = {
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.1202 }
						random_list = {
							1 = {
								planet_event = { id = spaceexploit.1202 }
								planet_event = { id = spaceexploit.202 }
							}
							1 = { }
						}
						planet_event = { id = spaceexploit.12 }
					}
				}
			}
		}
		else_if = {
			limit = {
				is_moon = yes
			}
			log = "Selected Exploit Center is a Moon for \\[ROOT.GetName]"
			log = "Remaining Starting colonies \\[ROOT.exploit_start_colonies] for \\[ROOT.GetName]"
			planet = {
				every_moon = {
					limit = {
						ROOT = { check_variable = { which = exploit_start_colonies value > 0 } }
						NOR = {
							has_modifier = colonized_planet
							is_colony = yes
							is_colonizable = yes
						}
					}
					log = "Colonized a sister Moon of the capital for \\[ROOT.GetName]"
					ROOT = { change_variable = { which = exploit_start_colonies value = -1 } }
					add_modifier = { modifier = building_thing }
					if = {
						limit = {
							NOT = { has_modifier = colonized_planet }
						}
						add_modifier = { modifier = colonized_planet }
					}
					set_variable = { which = exploitation_size value = 0 }
					new_colony_setup = yes
					breakdown_deposits = yes
					exploit_size_set = yes
					switch = {
						trigger = is_planet_class
						pc_shattered = {
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.502 }
							planet_event = { id = spaceexploit.502 }
							planet_event = { id = spaceexploit.502 }
							random_list = {
								1 = { planet_event = { id = spaceexploit.502 } }
								1 = { }
							}
							planet_event = { id = spaceexploit.5 }
						}
						pc_frozen = {
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.102 }
							planet_event = { id = spaceexploit.102 }
							planet_event = { id = spaceexploit.102 }
							random_list = {
								1 = { planet_event = { id = spaceexploit.102 } }
								1 = { }
							}
							planet_event = { id = spaceexploit.1 }
						}
						pc_molten = {
							planet_event = { id = spaceexploit.1002 }
							planet_event = { id = spaceexploit.1002 }
							planet_event = { id = spaceexploit.1002 }
							random_list = {
								1 = { planet_event = { id = spaceexploit.1002 } }
								1 = { }
							}
							planet_event = { id = spaceexploit.10 }
						}
						pc_barren = {
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.1202 }
							planet_event = { id = spaceexploit.1202 }
							planet_event = { id = spaceexploit.1202 }
							random_list = {
								1 = {
									planet_event = { id = spaceexploit.1202 }
									planet_event = { id = spaceexploit.202 }
								}
								1 = { }
							}
							planet_event = { id = spaceexploit.12 }
						}
						pc_barren_cold = {
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.1202 }
							planet_event = { id = spaceexploit.1202 }
							planet_event = { id = spaceexploit.1202 }
							random_list = {
								1 = {
									planet_event = { id = spaceexploit.1202 }
									planet_event = { id = spaceexploit.202 }
								}
								1 = { }
							}
							planet_event = { id = spaceexploit.12 }
						}
						pc_toxic = {
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.202 }
							planet_event = { id = spaceexploit.1202 }
							planet_event = { id = spaceexploit.1202 }
							planet_event = { id = spaceexploit.1202 }
							random_list = {
								1 = {
									planet_event = { id = spaceexploit.1202 }
									planet_event = { id = spaceexploit.202 }
								}
								1 = { }
							}
							planet_event = { id = spaceexploit.12 }
						}
					}
				}
			}
		}
		solar_system = {
			if = {
				limit = {
					ROOT = { check_variable = { which = exploit_start_colonies value > 0 } }
					any_system_planet = {
						NOR = {
							has_modifier = colonized_planet
							is_colony = yes
							is_colonizable = yes
						}
						is_planet_class = pc_asteroid
					}
				}
				log = "Overflow Asteroid Exploit Colonies for \\[ROOT.GetName]"
				log = "Remaining Starting colonies \\[ROOT.exploit_start_colonies] for \\[ROOT.GetName]"
				while = {
					count = 5
					limit = {
						ROOT = { check_variable = { which = exploit_start_colonies value > 0 } }
						any_system_planet = {
							NOR = {
								has_modifier = colonized_planet
								is_colony = yes
								is_colonizable = yes
							}
							is_planet_class = pc_asteroid
						}
					}
					random_system_planet = {
						limit = {
							ROOT = { check_variable = { which = exploit_start_colonies value > 0 } }
							NOR = {
								has_modifier = colonized_planet
								is_colony = yes
								is_colonizable = yes
							}
							is_planet_class = pc_asteroid
						}
						log = "Colonized an Asteroid for \\[ROOT.GetName]"
						ROOT = { change_variable = { which = exploit_start_colonies value = -1 } }
						add_modifier = { modifier = building_thing }
						if = {
							limit = {
								NOT = { has_modifier = colonized_planet }
							}
							add_modifier = { modifier = colonized_planet }
						}
						new_colony_setup = yes
						breakdown_deposits = yes
						exploit_size_set = yes
						if = {
							limit = {
								OR = {
									is_planet_class = pc_gas_giant
									is_planet_class = pc_asteroid
									is_planet_class = pc_ice_asteroid
								}
							}
							exploit_size_set = yes
						}
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.502 }
						planet_event = { id = spaceexploit.502 }
						random_list = {
							1 = { planet_event = { id = spaceexploit.502 } }
							1 = { }
						}
						planet_event = { id = spaceexploit.5 }
					}
				}
			}
			if = {
				limit = {
					ROOT = { check_variable = { which = exploit_start_colonies value > 0 } }
					any_system_planet = {
						NOR = {
							has_modifier = colonized_planet
							is_colony = yes
							is_colonizable = yes
						}
						is_planet_class = pc_molten
					}
				}
				log = "Overflow Molten Exploit Colonies for \\[ROOT.GetName]"
				log = "Remaining Starting colonies \\[ROOT.exploit_start_colonies] for \\[ROOT.GetName]"
				while = {
					count = 5
					limit = {
						ROOT = { check_variable = { which = exploit_start_colonies value > 0 } }
						any_system_planet = {
							NOR = {
								has_modifier = colonized_planet
								is_colony = yes
								is_colonizable = yes
							}
							is_planet_class = pc_molten
						}
					}
					random_system_planet = {
						limit = {
							ROOT = { check_variable = { which = exploit_start_colonies value > 0 } }
							NOR = {
								has_modifier = colonized_planet
								is_colony = yes
								is_colonizable = yes
							}
							is_planet_class = pc_molten
						}
						log = "Colonized a Molten World for \\[ROOT.GetName]"
						ROOT = { change_variable = { which = exploit_start_colonies value = -1 } }
						add_modifier = { modifier = building_thing }
						if = {
							limit = {
								NOT = { has_modifier = colonized_planet }
							}
							add_modifier = { modifier = colonized_planet }
						}
						new_colony_setup = yes
						breakdown_deposits = yes
						exploit_size_set = yes
						if = {
							limit = {
								OR = {
									is_planet_class = pc_gas_giant
									is_planet_class = pc_asteroid
									is_planet_class = pc_ice_asteroid
								}
							}
							exploit_size_set = yes
						}
						planet_event = { id = spaceexploit.1002 }
						planet_event = { id = spaceexploit.10 }
					}
				}
			}
			if = {
				limit = {
					ROOT = { check_variable = { which = exploit_start_colonies value > 0 } }
					any_system_planet = {
						NOR = {
							has_modifier = colonized_planet
							is_colony = yes
							is_colonizable = yes
						}
						OR = {
							is_planet_class = pc_barren
							is_planet_class = pc_barren_cold
						}
					}
				}
				log = "Overflow Barren Exploit Colonies for \\[ROOT.GetName]"
				log = "Remaining Starting colonies \\[ROOT.exploit_start_colonies] for \\[ROOT.GetName]"
				while = {
					count = 5
					limit = {
						ROOT = { check_variable = { which = exploit_start_colonies value > 0 } }
						any_system_planet = {
							NOR = {
								has_modifier = colonized_planet
								is_colony = yes
								is_colonizable = yes
							}
							OR = {
								is_planet_class = pc_barren
								is_planet_class = pc_barren_cold
							}
						}
					}
					random_system_planet = {
						limit = {
							ROOT = { check_variable = { which = exploit_start_colonies value > 0 } }
							NOR = {
								has_modifier = colonized_planet
								is_colony = yes
								is_colonizable = yes
								has_deposit_for = shipclass_research_station
							}
							OR = {
								is_planet_class = pc_barren
								is_planet_class = pc_barren_cold
							}
						}
						log = "Colonized a Barren World for \\[ROOT.GetName]"
						ROOT = { change_variable = { which = exploit_start_colonies value = -1 } }
						add_modifier = { modifier = building_thing }
						if = {
							limit = {
								NOT = { has_modifier = colonized_planet }
							}
							add_modifier = { modifier = colonized_planet }
						}
						new_colony_setup = yes
						breakdown_deposits = yes
						exploit_size_set = yes
						if = {
							limit = {
								OR = {
									is_planet_class = pc_gas_giant
									is_planet_class = pc_asteroid
									is_planet_class = pc_ice_asteroid
								}
							}
							exploit_size_set = yes
						}
						planet_event = { id = spaceexploit.202 }
						planet_event = { id = spaceexploit.1202 }
						planet_event = { id = spaceexploit.12 }
					}
				}
			}
		}
	}
}

breakdown_deposits = {
	every_deposit = {
		switch = {
			trigger = is_deposit_type
			d_minerals_10 = {
				remove_deposit = yes
				while = {
					count = 10
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_9 = {
				remove_deposit = yes
				while = {
					count = 9
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_8 = {
				remove_deposit = yes
				while = {
					count = 8
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_7 = {
				remove_deposit = yes
				while = {
					count = 7
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_6 = {
				remove_deposit = yes
				while = {
					count = 6
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_5 = {
				remove_deposit = yes
				while = {
					count = 5
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_4 = {
				remove_deposit = yes
				while = {
					count = 4
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_3 = {
				remove_deposit = yes
				while = {
					count = 3
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_minerals_2 = {
				remove_deposit = yes
				while = {
					count = 2
					PREV = { add_deposit = d_minerals_1 }
				}
			}
			d_energy_10 = {
				remove_deposit = yes
				while = {
					count = 10
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_9 = {
				remove_deposit = yes
				while = {
					count = 9
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_8 = {
				remove_deposit = yes
				while = {
					count = 8
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_7 = {
				remove_deposit = yes
				while = {
					count = 7
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_6 = {
				remove_deposit = yes
				while = {
					count = 6
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_5 = {
				remove_deposit = yes
				while = {
					count = 5
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_4 = {
				remove_deposit = yes
				while = {
					count = 4
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_3 = {
				remove_deposit = yes
				while = {
					count = 3
					PREV = { add_deposit = d_energy_1 }
				}
			}
			d_energy_2 = {
				remove_deposit = yes
				while = {
					count = 2
					PREV = { add_deposit = d_energy_1 }
				}
			}
		}
	}
}

exploit_size_set = {
	set_variable = { which = exploitation_size_calc value = trigger:planet_size }
	divide_variable = { which = exploitation_size_calc value = 2 }
	change_variable = { which = exploitation_size value = exploitation_size_calc }
	change_variable = { which = exploitation_size_max value = exploitation_size_calc }
}

upgrade_exploit_size = {
	if = {
		limit = {
			check_variable = { which = exploitation_size value = 0 }
		}
		set_variable = { which = exploitation_size value = 1 }
	}
	else = {
		change_variable = { which = exploitation_size value = 1 }
	}
	set_variable = { which = exploitation_size_upgrade value = trigger:planet_size }
	divide_variable = { which = exploitation_size_upgrade value = 10 }
	floor_variable =  exploitation_size_upgrade
	change_variable = { which = exploitation_size value = exploitation_size_upgrade }
	change_variable = { which = exploitation_size_max value = exploitation_size_upgrade }
}

tech_increase_exploit_size = {
	if = {
		limit = {
			check_variable = { which = exploitation_size value = 0 }
		}
		set_variable = { which = exploitation_size value = 1 }
	}
	else = {
		change_variable = { which = exploitation_size value = 1 }
	}
	set_variable = { which = exploitation_size_upgrade value = trigger:planet_size }
	divide_variable = { which = exploitation_size_upgrade value = 10 }
	floor_variable =  exploitation_size_upgrade
	change_variable = { which = exploitation_size value = exploitation_size_upgrade }
	change_variable = { which = exploitation_size_max value = exploitation_size_upgrade }
}

new_colony_setup = {
	solar_system = {
		if = {
			limit = {
				any_system_planet = {
					has_planet_flag = exploit_center
				}
			}
			random_system_planet = {
				limit = {
					has_planet_flag = exploit_center
				}
				add_deposit = d_small_colonies
				change_variable = { which = small_colony_count value = 1 }
				change_variable = { which = exploitation_trade value = 1 }
				if = {
					limit = {
						has_global_flag = exploitation_logging
					}
					log = "Minor Colony Count start \\[This.small_colony_count] on \\[This.GetName]"
				}
			}
		}
		else = {
			random_system_planet = {
				limit = {
					is_major_colony = yes
				}
				add_deposit = d_small_colonies
				set_planet_flag = exploit_center
				set_variable = { which = small_colony_count value = 1 }
				set_variable = { which = exploitation_trade value = 1 }
			}
		}
	}
}

exploit_batch_switch = {
	switch = {
		trigger = has_planet_flag
		exploit_mine_batch = {
			if = {
				limit = {
					can_build_exploit_mine = yes
				}
				pay_exploit_mine = yes
			}
			else = {
				set_timed_planet_flag = { flag = exploit_batch_delayed days = 30 }
			}
		}
		exploit_power_batch = {
			if = {
				limit = {
					can_build_exploit_power = yes
				}
				pay_exploit_power = yes
			}
			else = {
				set_timed_planet_flag = { flag = exploit_batch_delayed days = 30 }
			}
		}
		exploit_alloy_mine_batch = {
			if = {
				limit = {
					can_build_exploit_alloy_mine = yes
				}
				pay_exploit_alloy_mine = yes
			}
			else = {
				set_timed_planet_flag = { flag = exploit_batch_delayed days = 30 }
			}
		}
		exploit_alloy_foundry_batch = {
			if = {
				limit = {
					can_build_exploit_alloy_foundry = yes
				}
				pay_exploit_alloy_foundry = yes
			}
			else = {
				set_timed_planet_flag = { flag = exploit_batch_delayed days = 30 }
			}
		}
		exploit_lava_refinery_batch = {
			if = {
				limit = {
					can_build_exploit_lava_refinery = yes
				}
				pay_exploit_lava_refinery = yes
			}
			else = {
				set_timed_planet_flag = { flag = exploit_batch_delayed days = 30 }
			}
		}
		exploit_research_batch = {
			if = {
				limit = {
					can_build_exploit_research = yes
				}
				pay_exploit_research = yes
			}
			else = {
				set_timed_planet_flag = { flag = exploit_batch_delayed days = 30 }
			}
		}
		exploit_motes_batch = {
			if = {
				limit = {
					can_build_exploit_motes = yes
				}
				pay_exploit_motes = yes
			}
			else = {
				set_timed_planet_flag = { flag = exploit_batch_delayed days = 30 }
			}
		}
		exploit_gases_batch = {
			if = {
				limit = {
					can_build_exploit_gases = yes
				}
				pay_exploit_gases = yes
			}
			else = {
				set_timed_planet_flag = { flag = exploit_batch_delayed days = 30 }
			}
		}
		exploit_crystals_batch = {
			if = {
				limit = {
					can_build_exploit_crystals = yes
				}
				pay_exploit_crystals = yes
			}
			else = {
				set_timed_planet_flag = { flag = exploit_batch_delayed days = 30 }
			}
		}
	}
}

#has_deposit_for = shipclass_mining_station
ai_colony_switch = {
	if = {
		limit = {
			has_perm_flag = yes
			NOT = { exploit_already_building = yes }
		}
		switch = {
			trigger = has_planet_flag
			exploit_mine_loop = {
				exploit_mine_loop = yes
			}
			exploit_power_loop = {
				exploit_power_loop = yes
			}
			exploit_alloy_mine_loop = {
				exploit_alloy_mine_loop = yes
			}
			exploit_alloy_foundry_loop = {
				exploit_alloy_foundry_loop = yes
			}
			exploit_lava_refinery_loop = {
				exploit_lava_refinery_loop = yes
			}
			exploit_research_loop = {
				exploit_research_loop = yes
			}
			exploit_motes_loop = {
				exploit_motes_loop = yes
			}
			exploit_gases_loop = {
				exploit_gases_loop = yes
			}
			exploit_crystals_loop = {
				exploit_crystals_loop = yes
			}
		}
	}
	else_if = {
		limit = {
			is_planet_class = pc_molten
			NOT = {	has_deposit_for = shipclass_research_station }
			has_exploit_technology = yes
		}
		exploit_lava_refinery_loop = yes
	}
	else_if = {
		limit = {
			has_exploit_technology = yes
			OR = {
				has_deposit_for = shipclass_research_station
				AND = {
					is_planet_class = pc_gas_giant
					space_owner = { has_technology = tech_habitat_1 }
					has_energy_deposit = yes
				}
			}
		}
		exploit_research_loop = yes
	}
	else_if = {
		limit = {
			has_exploit_technology = yes
			has_alloy_deposit = yes
		}
		random_list = {
			10 = {
				modifier = {
					factor = 0
					is_planet_class = pc_asteroid 
				}
				exploit_alloy_foundry_loop = yes
			}
			10 = {
				modifier = {
					factor = 0
					NOT = { is_planet_class = pc_asteroid }
				}
				exploit_alloy_mine_loop = yes
			}
		}
	}
	else_if = {
		limit = {
			has_exploit_technology = yes
			has_deposit = no
		}
		random_list = {
			10 = {
				modifier = {
					factor = 0
					NOT = { is_planet_class = pc_asteroid }
				}
				exploit_alloy_mine_loop = yes
			}
			10 = {
				modifier = {
					factor = 0
					is_planet_class = pc_asteroid
				}
				exploit_research_loop = yes
			}
		}
	}
	else_if = {
		limit = {
			has_exploit_technology = yes
			has_energy_deposit = yes
			has_mineral_deposit = yes
		}
		exploit_alloy_foundry_loop = yes
	}
	else_if = {
		limit = {
			has_exploit_technology = yes
			has_energy_deposit = yes
		}
		random_list = {
			10 = {
				exploit_alloy_foundry_loop = yes
			}
			10 = {
				exploit_research_loop = yes
			}
		}
	}
	else_if = {
		limit = {
			has_exploit_technology = yes
			has_mineral_deposit = yes
		}
		random_list = {
			10 = {
				modifier = {
					factor = 0
					planet_size > 10
				}
				exploit_mine_loop = yes
			}
			10 = {
				exploit_alloy_foundry_loop = yes
			}
		}
	}
}

reset_exploit_variables = {
	set_variable = { which = minor_colonies value = 0 }
	set_variable = { which = minor_colonies_available value = 0 }
	
	set_variable = { which = minor_colony_barren value = 0 }
	set_variable = { which = minor_colony_frozen value = 0 }
	set_variable = { which = minor_colony_asteroid value = 0 }
	set_variable = { which = minor_colony_molten value = 0 }
	set_variable = { which = minor_colony_toxic value = 0 }
	set_variable = { which = minor_colony_gas_giants value = 0 }
	set_variable = { which = minor_colony_ice_asteroid value = 0 }
	
	set_variable = { which = minor_colony_barren_available value = 0 }
	set_variable = { which = minor_colony_frozen_available value = 0 }
	set_variable = { which = minor_colony_asteroid_available value = 0 }
	set_variable = { which = minor_colony_molten_available value = 0 }
	set_variable = { which = minor_colony_toxic_available value = 0 }
	set_variable = { which = minor_colony_gas_giants_available value = 0 }
	set_variable = { which = minor_colony_ice_asteroid_available value = 0 }
	
	set_variable = { which = exploit_energy_available value = 0 }
	set_variable = { which = exploit_minerals_available value = 0 }
	set_variable = { which = exploit_alloy_available value = 0 }
	set_variable = { which = exploit_foundry_available value = 0 }
	set_variable = { which = exploit_research_available value = 0 }
	set_variable = { which = exploit_lava_refinery_available value = 0 }
	set_variable = { which = exploit_motes_available value = 0 }
	set_variable = { which = exploit_gases_available value = 0 }
	set_variable = { which = exploit_crystals_available value = 0 }
	
	set_variable = { which = exploit_energy_colonies value = 0 }
	set_variable = { which = exploit_mineral_mine_colonies value = 0 }
	set_variable = { which = exploit_alloy_mine_colonies value = 0 }
	set_variable = { which = exploit_alloy_foundry_colonies value = 0 }
	set_variable = { which = exploit_research_lab_colonies value = 0 }
	set_variable = { which = exploit_lava_refinery_colonies value = 0 }
	set_variable = { which = exploit_motes_mine_colonies value = 0 }
	set_variable = { which = exploit_gas_well_colonies value = 0 }
	set_variable = { which = exploit_crystal_mine_colonies value = 0 }
	
	set_variable = { which = exploit_minor_colonies_building value = 0 }
	set_variable = { which = exploit_energy_building value = 0 }
	set_variable = { which = exploit_mineral_mine_building value = 0 }
	set_variable = { which = exploit_alloy_mine_building value = 0 }
	set_variable = { which = exploit_alloy_foundry_building value = 0 }
	set_variable = { which = exploit_research_lab_building value = 0 }
	set_variable = { which = exploit_lava_refinery_building value = 0 }
	set_variable = { which = exploit_motes_mine_building value = 0 }
	set_variable = { which = exploit_gas_well_building value = 0 }
	set_variable = { which = exploit_crystal_mine_building value = 0 }
}

#Country Scope
document_minor_colonies = {
	reset_exploit_variables = yes
	every_system_within_border = {
		limit = {
			any_system_planet = {
				is_major_colony = yes
			}
		}
		every_system_planet = {
			limit = {
				has_modifier = colonized_planet
			}
			#log = "Documented Minor Colony on \\[This.GetName] for \\[ROOT.GetName]"
			change_variable = { which = minor_colonies value = 1 }
			switch = {
				trigger = has_planet_flag
				exploit_mine_loop = {
					ROOT = { change_variable = { which = exploit_mineral_mine_colonies value = 1 } }
				}
				exploit_power_loop = {
					ROOT = { change_variable = { which = exploit_energy_colonies value = 1 } }
				}
				exploit_alloy_mine_loop = {
					ROOT = { change_variable = { which = exploit_alloy_mine_colonies value = 1 } }
				}
				exploit_alloy_foundry_loop = {
					ROOT = { change_variable = { which = exploit_alloy_foundry_colonies value = 1 } }
				}
				exploit_lava_refinery_loop = {
					ROOT = { change_variable = { which = exploit_lava_refinery_colonies value = 1 } }
				}
				exploit_research_loop = {
					ROOT = { change_variable = { which = exploit_research_lab_colonies value = 1 } }
				}
				exploit_motes_loop = {
					ROOT = { change_variable = { which = exploit_motes_mine_colonies value = 1 } }
				}
				exploit_gases_loop = {
					ROOT = { change_variable = { which = exploit_gas_well_colonies value = 1 } }
				}
				exploit_crystals_loop = {
					ROOT = { change_variable = { which = exploit_crystal_mine_colonies value = 1 } }
				}
			}
			switch = {
				trigger = has_planet_flag
				exploit_building_mines = {
					ROOT = { change_variable = { which = exploit_mineral_mine_building value = 1 } }
				}
				exploit_building_power = {
					ROOT = { change_variable = { which = exploit_energy_building value = 1 } }
				}
				exploit_building_alloys = {
					ROOT = { change_variable = { which = exploit_alloy_mine_building value = 1 } }
				}
				exploit_building_foundry = {
					ROOT = { change_variable = { which = exploit_alloy_foundry_building value = 1 } }
				}
				exploit_building_lava = {
					ROOT = { change_variable = { which = exploit_lava_refinery_building value = 1 } }
				}
				exploit_building_research = {
					ROOT = { change_variable = { which = exploit_research_lab_building value = 1 } }
				}
				exploit_building_motes = {
					ROOT = { change_variable = { which = exploit_motes_mine_building value = 1 } }
				}
				exploit_building_gases = {
					ROOT = { change_variable = { which = exploit_gas_well_building value = 1 } }
				}
				exploit_building_crystals = {
					ROOT = { change_variable = { which = exploit_crystal_mine_building value = 1 } }
				}
			}
			if = {
				limit = {
					OR = {
						is_planet_class = pc_barren
						is_planet_class = pc_barren_cold
					}
				}
				ROOT = { change_variable = { which = minor_colony_barren value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_frozen
				}
				ROOT = { change_variable = { which = minor_colony_frozen value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_asteroid
				}
				ROOT = { change_variable = { which = minor_colony_asteroid value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_molten
				}
				ROOT = { change_variable = { which = minor_colony_molten value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_toxic
				}
				ROOT = { change_variable = { which = minor_colony_toxic value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_gas_giant
				}
				ROOT = { change_variable = { which = minor_colony_gas_giants value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_ice_asteroid
				}
				ROOT = { change_variable = { which = minor_colony_ice_asteroid value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_shattered
				}
				ROOT = { change_variable = { which = minor_colony_shattered value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_shrouded
				}
				ROOT = { change_variable = { which = minor_colony_shrouded value = 1 } }
			}
		}
		every_system_planet = {
			limit = {
				NOT = { has_modifier = colonized_planet }
			}
			log = "Documented Minor Colony Available on [This.GetName] for [ROOT.GetName]"
			ROOT = { change_variable = { which = minor_colonies_available value = 1 } }
			if = {
				limit = {
					OR = {
						is_planet_class = pc_barren
						is_planet_class = pc_barren_cold
					}
				}
				ROOT = { change_variable = { which = minor_colony_barren_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_frozen
				}
				ROOT = { change_variable = { which = minor_colony_frozen_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_asteroid
				}
				ROOT = { change_variable = { which = minor_colony_asteroid_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_molten
				}
				ROOT = { change_variable = { which = minor_colony_molten_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_toxic
				}
				ROOT = { change_variable = { which = minor_colony_toxic_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_gas_giant
				}
				ROOT = { change_variable = { which = minor_colony_gas_giants_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_ice_asteroid
				}
				ROOT = { change_variable = { which = minor_colony_ice_asteroid_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_shattered
				}
				ROOT = { change_variable = { which = minor_colony_shattered_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_broken
				}
				ROOT = { change_variable = { which = minor_colony_shattered_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_shrouded
				}
				ROOT = { change_variable = { which = minor_colony_shrouded_available value = 1 } }
			}
			else_if = {
				limit = {
					is_planet_class = pc_rare_crystal_asteroid
				}
				ROOT = { change_variable = { which = minor_colony_asteroid_available value = 1 } }
			}		
		}
	}
	#Building Colonies
	change_variable = { which = exploit_minor_colonies_building value = exploit_energy_building }
	change_variable = { which = exploit_minor_colonies_building value = exploit_mineral_mine_building }
	change_variable = { which = exploit_minor_colonies_building value = exploit_alloy_mine_building }
	change_variable = { which = exploit_minor_colonies_building value = exploit_alloy_foundry_building }
	change_variable = { which = exploit_minor_colonies_building value = exploit_research_lab_building }
	change_variable = { which = exploit_minor_colonies_building value = exploit_lava_refinery_building }
	change_variable = { which = exploit_minor_colonies_building value = exploit_motes_mine_building }
	change_variable = { which = exploit_minor_colonies_building value = exploit_gas_well_building }
	change_variable = { which = exploit_minor_colonies_building value = exploit_crystal_mine_building }
	
	#Energy Available
	change_variable = { which = exploit_energy_available value = minor_colony_gas_giants_available }
	
	#Mining Available
	change_variable = { which = exploit_minerals_available value = minor_colonies_available }
	subtract_variable = { which = exploit_minerals_available value = minor_colony_gas_giants_available }
	
	#Alloy Mining Available
	change_variable = { which = exploit_alloy_available value = minor_colony_asteroid_available }
	
	#Alloy Foundry Available
	change_variable = { which = exploit_foundry_available value = minor_colonies_available }
	
	#Research Labs Available
	change_variable = { which = exploit_research_available value = minor_colonies_available }
	
	#Lava Refinery Available
	change_variable = { which = exploit_lava_refinery_available value = minor_colony_molten_available }
	
	#Motes Mining Available
	change_variable = { which = exploit_motes_available value = minor_colony_molten_available }
	
	#Gas Well Available
	change_variable = { which = exploit_gases_available value = minor_colony_gas_giants_available }
	
	#Crystal Mining Available
	change_variable = { which = exploit_crystals_available value = minor_colony_ice_asteroid_available }
	
	#Zro Available
	change_variable = { which = exploit_zro_available value = minor_colony_shrouded_available }
	
	subtract_variable = { which = exploit_power_plant_available value = exploit_power_plant_queue }
	subtract_variable = { which = exploit_mineral_mine_available value = exploit_mineral_mine_queue }
	subtract_variable = { which = exploit_alloy_available value = exploit_alloy_queue }
	subtract_variable = { which = exploit_foundry_available value = exploit_foundry_queue }
	subtract_variable = { which = exploit_research_available value = exploit_research_queue }
	subtract_variable = { which = exploit_lava_refinery_available value = exploit_lava_refinery_queue }
	subtract_variable = { which = exploit_motes_available value = exploit_motes_queue }
	subtract_variable = { which = exploit_gases_available value = exploit_gases_queue }
	subtract_variable = { which = exploit_crystals_available value = exploit_crystals_queue }
}