@platform_alloys = 300
@platform_minerals = 100

@platform_energy_upkeep = 5
@platform_alloy_upkeep = 2

@platform_district_build_time = 180

@fake_jobs = 20

district_orbital_expansion = {
	base_buildtime = @platform_district_build_time
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		always = no
	}
	
	potential = {
		NOT = { has_global_flag = no_orbital_infra }
		has_space_elevator_support = yes
		check_variable = { which = orbital_infrastructure_space value > 0 }
		OR = {
			AND = {
				has_active_building = building_space_elevator
				count_deposits = { type = orbital_platform count < 9 }
			}
			AND = {
				has_active_building = building_space_elevator_2
				count_deposits = { type = orbital_platform count < 22 }
			}
			AND = {
				has_active_building = building_space_elevator_3
			}
		}
		check_modifier_value = { modifier = district_orbital_platform_cap_max value < 4 }
		owner = {
			is_ai = yes
			resource_stockpile_compare = {
				resource = alloys
				value >= 150
			}
		}
	}
	
	allow = {
	}
	
	planet_modifier = {
	}
	
	resources = {
		category = planet_districts
		cost = {
			energy = 150
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
			}
		}
		modifier = {
			job_foundry_add = @fake_jobs
			job_technician_add = @fake_jobs
			job_miner_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
			}
		}
		modifier = {
			job_alloy_drone_add = @fake_jobs
			job_technician_drone_add = @fake_jobs
			job_mining_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
			}
		}
		modifier = {
			job_fabricator_add = @fake_jobs
			job_technician_drone_add = @fake_jobs
			job_mining_drone_add = @fake_jobs
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
				free_district_slots < 3
			}
		}
		modifier = {
			job_foundry_add = @fake_jobs
			job_technician_add = @fake_jobs
			job_miner_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
				free_district_slots < 3
			}
		}
		modifier = {
			job_alloy_drone_add = @fake_jobs
			job_technician_drone_add = @fake_jobs
			job_mining_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
				free_district_slots < 3
			}
		}
		modifier = {
			job_fabricator_add = @fake_jobs
			job_technician_drone_add = @fake_jobs
			job_mining_drone_add = @fake_jobs
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
				free_district_slots < 2
			}
		}
		modifier = {
			job_foundry_add = @fake_jobs
			job_technician_add = @fake_jobs
			job_miner_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
				free_district_slots < 2
			}
		}
		modifier = {
			job_alloy_drone_add = @fake_jobs
			job_technician_drone_add = @fake_jobs
			job_mining_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
				free_district_slots < 2
			}
		}
		modifier = {
			job_fabricator_add = @fake_jobs
			job_technician_drone_add = @fake_jobs
			job_mining_drone_add = @fake_jobs
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
				check_modifier_value = { modifier = district_orbital_platform_cap_max value < 2 }
			}
		}
		modifier = {
			job_foundry_add = @fake_jobs
			job_technician_add = @fake_jobs
			job_miner_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
				check_modifier_value = { modifier = district_orbital_platform_cap_max value < 2 }
			}
		}
		modifier = {
			job_alloy_drone_add = @fake_jobs
			job_technician_drone_add = @fake_jobs
			job_mining_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
				check_modifier_value = { modifier = district_orbital_platform_cap_max value < 2 }
			}
		}
		modifier = {
			job_fabricator_add = @fake_jobs
			job_technician_drone_add = @fake_jobs
			job_mining_drone_add = @fake_jobs
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
				check_modifier_value = { modifier = district_orbital_platform_cap_max value < 3 }
			}
		}
		modifier = {
			job_foundry_add = @fake_jobs
			job_technician_add = @fake_jobs
			job_miner_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
				check_modifier_value = { modifier = district_orbital_platform_cap_max value < 3 }
			}
		}
		modifier = {
			job_alloy_drone_add = @fake_jobs
			job_technician_drone_add = @fake_jobs
			job_mining_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
				check_modifier_value = { modifier = district_orbital_platform_cap_max value < 3 }
			}
		}
		modifier = {
			job_fabricator_add = @fake_jobs
			job_technician_drone_add = @fake_jobs
			job_mining_drone_add = @fake_jobs
		}
	}
	
	prerequisites = {
	}
	
	ai_weight = {
		weight = 1000
		modifier = {
			factor = 100
			free_district_slots < 3
		}
		modifier = {
			factor = 100
			free_district_slots < 2
		}
		modifier = {
			factor = 100
			check_modifier_value = { modifier = district_orbital_platform_cap_max value < 2 }
		}
		modifier = {
			factor = 100
			check_modifier_value = { modifier = district_orbital_platform_cap_max value < 3 }
		}
	}
}

district_orbital_platform_shipyard_ai = {
	base_buildtime = @platform_district_build_time
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		has_oi_space_elevator = yes
		always = no
	}
	
	potential = {
		NOT = { has_global_flag = no_orbital_infra }
		has_oi_space_elevator = yes
		owner = { is_ai = yes }
		solar_system = {
			starbase = {
				has_starbase_module = shipyard
			}
		}
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "not_enough_orbital_space"
			has_oi_space = yes
		}
		custom_tooltip = {
			fail_text = "space_elevator_does_not_support"
			has_space_elevator_support = yes
		}
	}
	
	planet_modifier = {
		planet_max_districts_add = 1
		district_orbital_platform_cap_max = -1
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @platform_minerals
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			alloys = @platform_alloys
		}
		upkeep = {
			energy = @platform_energy_upkeep
			alloys = @platform_alloy_upkeep
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
			}
		}
		modifier = {
			job_foundry_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
			}
		}
		modifier = {
			job_alloy_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
			}
		}
		modifier = {
			job_fabricator_add = @fake_jobs
		}
	}
	
	prerequisites = {
	}
	
	ai_weight = {
		weight = 1000
		modifier = {
			factor = 0
			num_districts = { type = district_orbital_platform_shipyard value > 9 }
		}
		modifier = {
			factor = 10
			solar_system = {
				starbase = {
					count_starbase_modules = { type = shipyard count > 0 }
				}
			}
		}
		modifier = {
			factor = 10
			solar_system = {
				starbase = {
					count_starbase_modules = { type = shipyard count > 1 }
				}
			}
		}
		modifier = {
			factor = 10
			solar_system = {
				starbase = {
					count_starbase_modules = { type = shipyard count > 2 }
				}
			}
		}
		modifier = {
			factor = 10
			solar_system = {
				starbase = {
					count_starbase_modules = { type = shipyard count > 3 }
				}
			}
		}
		modifier = {
			factor = 10
			solar_system = {
				starbase = {
					count_starbase_modules = { type = shipyard count > 4 }
				}
			}
		}
		modifier = {
			factor = 10
			solar_system = {
				starbase = {
					count_starbase_modules = { type = shipyard count > 5 }
				}
			}
		}
	}
}
district_orbital_platform_military_ai = {
	base_buildtime = @platform_district_build_time
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		has_oi_space_elevator = yes
	}
	
	potential = {
		NOT = { has_global_flag = no_orbital_infra }
		OR = {
			NOT = { has_planet_flag = orbitalinfra_district_hide }
			has_district = district_orbital_platform_military
		}
		has_oi_space_elevator = yes
		owner = { is_ai = yes }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "not_enough_orbital_space"
			has_oi_space = yes
		}
		custom_tooltip = {
			fail_text = "space_elevator_does_not_support"
			has_space_elevator_support = yes
		}
	}
	
	planet_modifier = {
		planet_max_districts_add = 1
		district_orbital_platform_cap_max = -1
	}
	
	resources = {
		category = planet_districts
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			alloys = 500
		}
		cost = {
			minerals = @platform_minerals
		}
		upkeep = {
			energy = @platform_energy_upkeep
			alloys = 12
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
				owner = { has_technology = tech_starbase_3 }
			}
			alloys = 200
		}
		upkeep = {
			trigger = {
				owner = { has_technology = tech_starbase_3 }
			}
			alloys = 5
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
				owner = { has_technology = tech_starbase_4 }
			}
			alloys = 200
		}
		upkeep = {
			trigger = {
				owner = { has_technology = tech_starbase_4 }
			}
			alloys = 5
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
				owner = { has_technology = tech_starbase_5 }
			}
			alloys = 200
		}
		upkeep = {
			trigger = {
				owner = { has_technology = tech_starbase_5 }
			}
			alloys = 5
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
			}
		}
		modifier = {
			job_foundry_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
			}
		}
		modifier = {
			job_alloy_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
			}
		}
		modifier = {
			job_fabricator_add = @fake_jobs
		}
	}
	
	prerequisites = {
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			free_jobs > 0 
		}
	}

	ai_resource_production = {
		alloys = 10
		trigger = {
			always = yes
		}
	}
}
district_orbital_platform_industrial_ai = {
	base_buildtime = @platform_district_build_time
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		has_oi_space_elevator = yes
		always = no
	}
	
	potential = {
		NOT = { has_global_flag = no_orbital_infra }
		has_oi_space_elevator = yes
		owner = { is_ai = yes }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "not_enough_orbital_space"
			has_oi_space = yes
		}
		custom_tooltip = {
			fail_text = "space_elevator_does_not_support"
			has_space_elevator_support = yes
		}
	}
	
	planet_modifier = {
		planet_housing_add = 2
		planet_max_districts_add = 1
		district_orbital_platform_cap_max = -1
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @platform_minerals
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			alloys = @platform_alloys
		}
		upkeep = {
			energy = @platform_energy_upkeep
			alloys = @platform_alloy_upkeep
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
			}
		}
		modifier = {
			job_foundry_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
			}
		}
		modifier = {
			job_alloy_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
			}
		}
		modifier = {
			job_fabricator_add = @fake_jobs
		}
	}

	ai_resource_production = {
		alloys = 1
		trigger = {
			always = yes
		}
	}
	ai_resource_production = {
		consumer_goods = 1
		trigger = {
			owner = {
				country_uses_consumer_goods = yes
			}
		}
	}
	
	prerequisites = {
	}
	
	ai_weight = {
		weight = 1000
	}
}
district_orbital_platform_research_ai = {
	base_buildtime = @platform_district_build_time
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		has_oi_space_elevator = yes
		always = no
	}
	
	potential = {
		NOT = { has_global_flag = no_orbital_infra }
		has_oi_space_elevator = yes
		owner = { is_ai = yes }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "not_enough_orbital_space"
			has_oi_space = yes
		}
		custom_tooltip = {
			fail_text = "space_elevator_does_not_support"
			has_space_elevator_support = yes
		}
	}
	
	planet_modifier = {
		planet_housing_add = 2
		planet_max_districts_add = 1
		district_orbital_platform_cap_max = -1
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @platform_minerals
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			alloys = @platform_alloys
		}
		upkeep = {
			energy = @platform_energy_upkeep
			alloys = @platform_alloy_upkeep
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
			}
		}
		modifier = {
			job_researcher_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
			}
		}
		modifier = {
			job_brain_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
			}
		}
		modifier = {
			job_calculator_add = @fake_jobs
		}
	}
	
	prerequisites = {
	}
	
	ai_weight = {
		weight = 1000
	}
}
district_orbital_platform_refinery_ai = {
	base_buildtime = @platform_district_build_time
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		has_oi_space_elevator = yes
		always = no
	}
	
	potential = {
		NOT = { has_global_flag = no_orbital_infra }
		has_oi_space_elevator = yes
		owner = { is_ai = yes }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "not_enough_orbital_space"
			has_oi_space = yes
		}
		custom_tooltip = {
			fail_text = "space_elevator_does_not_support"
			has_space_elevator_support = yes
		}
	}
	
	planet_modifier = {
		planet_housing_add = 3
		planet_max_districts_add = 1
		district_orbital_platform_cap_max = -1
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @platform_minerals
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			alloys = @platform_alloys
		}
		upkeep = {
			energy = @platform_energy_upkeep
			alloys = @platform_alloy_upkeep
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
			}
		}
		modifier = {
			job_chemist_add = @fake_jobs
			job_gas_refiner_add = @fake_jobs
			job_translucer_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
			}
		}
		modifier = {
			job_chemist_drone_add = @fake_jobs
			job_gas_refiner_drone_add = @fake_jobs
			job_translucer_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
			}
		}
		modifier = {
			job_chemist_drone_add = @fake_jobs
			job_gas_refiner_drone_add = @fake_jobs
			job_translucer_drone_add = @fake_jobs
		}
	}
	
	prerequisites = {
	}
	
	ai_weight = {
		weight = 1000
	}
}

district_orbital_platform_solar_array_ai = {
	base_buildtime = @platform_district_build_time
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		has_oi_space_elevator = yes
		always = no
	}
	
	potential = {
		NOT = { has_global_flag = no_orbital_infra }
		has_oi_space_elevator = yes
		owner = { is_ai = yes }
		solar_system = {
			NOR = {
				is_star_class = sc_black_hole
				is_star_class = sc_neutron_star
				is_star_class = sc_pulsar
				is_star_class = sc_t
			}
		}
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "not_enough_orbital_space"
			has_oi_space = yes
		}
		custom_tooltip = {
			fail_text = "space_elevator_does_not_support"
			has_space_elevator_support = yes
		}
	}
	
	planet_modifier = {
		planet_housing_add = 2
		planet_max_districts_add = 1
		district_orbital_platform_cap_max = -1
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @platform_minerals
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			alloys = @platform_alloys
		}
		upkeep = {
			alloys = @platform_alloy_upkeep
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
			}
		}
		modifier = {
			job_technician_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
			}
		}
		modifier = {
			job_technician_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
			}
		}
		modifier = {
			job_technician_drone_add = @fake_jobs
		}
	}

	ai_resource_production = {
		energy = 1
		trigger = {
			always = yes
		}
	}
	ai_weight = {
		weight = 1000
	}
}

district_orbital_platform_mining_ai = {
	base_buildtime = @platform_district_build_time
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		has_oi_space_elevator = yes
		always = no
	}
	
	potential = {
		NOT = { has_global_flag = no_orbital_infra }
		has_oi_space_elevator = yes
		owner = { is_ai = yes }
		OR = {
			AND = {
				is_moon = yes
				planet = {
					uninhabitable_regular_planet = yes
				}
			}
			AND = {
				has_moon = yes
				any_moon = {
					uninhabitable_regular_planet = yes
				}
			}
			solar_system = {
				any_system_planet = {
					is_asteroid = yes
				}
			}
		}
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "not_enough_orbital_space"
			has_oi_space = yes
		}
		custom_tooltip = {
			fail_text = "space_elevator_does_not_support"
			has_space_elevator_support = yes
		}
	}
	
	planet_modifier = {
		planet_housing_add = 2
		planet_max_districts_add = 1
		district_orbital_platform_cap_max = -1
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @platform_minerals
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			alloys = @platform_alloys
		}
		upkeep = {
			alloys = @platform_alloy_upkeep
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
			}
		}
		modifier = {
			job_miner_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
			}
		}
		modifier = {
			job_mining_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
			}
		}
		modifier = {
			job_mining_drone_add = @fake_jobs
		}
	}
	
	ai_resource_production = {
		minerals = 1
		trigger = {
			always = yes
		}
	}
}

district_orbital_platform_farming_ai = {
	base_buildtime = @platform_district_build_time
	is_capped_by_modifier = no
	
	show_on_uncolonized = {
		has_oi_space_elevator = yes
		always = no
	}
	
	potential = {
		NOT = { has_global_flag = no_orbital_infra }
		has_oi_space_elevator = yes
		owner = { is_ai = yes }
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "not_enough_orbital_space"
			has_oi_space = yes
		}
		custom_tooltip = {
			fail_text = "space_elevator_does_not_support"
			has_space_elevator_support = yes
		}
	}
	
	planet_modifier = {
		planet_housing_add = 2
		planet_max_districts_add = 1
		district_orbital_platform_cap_max = -1
	}
	
	resources = {
		category = planet_districts
		cost = {
			minerals = @platform_minerals
		}
		cost = {
			trigger = {
				owner = { is_ai = no }
			}
			alloys = @platform_alloys
		}
		upkeep = {
			alloys = @platform_alloy_upkeep
		}
	}
	
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_regular_empire = yes
			}
		}
		modifier = {
			job_farmer_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_hive_empire = yes
			}
		}
		modifier = {
			job_agri_drone_add = @fake_jobs
		}
	}
	triggered_planet_modifier = {
		potential = {
			owner = {
				is_ai = yes
				is_machine_empire = yes
			}
		}
		modifier = {
			job_agri_drone_add = @fake_jobs
		}
	}

	ai_resource_production = {
		food = 1
		trigger = {
			always = yes
		}
	}
}