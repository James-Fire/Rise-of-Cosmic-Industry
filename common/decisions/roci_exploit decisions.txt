colonize_planet = {
	sound = event_administrative_work
	icon = decision_resources
	
	resources = {
		category = decisions
		cost = {
			trigger = {
				is_base_planet = yes
			}
			energy = @BaseEnergyCost
			alloys = @BaseAlloyCost
			minerals = @BaseMineralCost
		}
		cost = {
			trigger = {
				is_difficult_planet = yes
			}
			energy = @DifficultEnergyCost
			alloys = @DifficultAlloyCost
			minerals = @DifficultMineralCost
		}
		cost = {
			trigger = {
				is_vacuum_planet = yes
			}
			energy = @VacuumEnergyCost
			alloys = @VacuumAlloyCost
			minerals = @VacuumMineralCost
		}
		cost = {
			alloys = @ConstructionCost
			energy = @ConstructionCost
		}
	}
	potential = {
		NOT = { has_global_flag = no_exploit }
		exists = space_owner
		NOT = {
			has_modifier = colonized_planet
			has_modifier = roci_building_thing
		}
		has_exploit_technology = yes
	}
	allow = {
		custom_tooltip = {
			fail_text = "requires_major_colony"
			solar_system = {
				any_system_planet = {
					is_major_colony = yes
				}
			}
		}
		has_exploit_technology = yes
	}
	
	effect = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						is_planet_class = pc_molten
					}
				}
				add_modifier = { modifier = roci_building_thing days = @LongConstructionTime }
				set_planet_flag = exploit_building_power
				planet_event = { id = spaceexploit.202 days = @LongConstructionTime }
			}
			planet_event = { id = spaceexploit.10000 }
		}
	}
	
	ai_weight = {
		weight = 0 #AI stuff is in the trade_value Decision.		
	}
}

0_mineral_menu = {
	sound = event_administrative_work
	icon = decision_resources
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		can_build_exploit = yes
		solar_system = {
			space_owner = {
				is_ai = no
				
			}
		}
		has_exploit_technology = yes
	}
	
	allow = {
		always = yes
	}	
	
	effect = {
		if = {
			limit = {
				has_planet_flag = mineral_menu
			}
			remove_planet_flag = mineral_menu
		}
		else = {
			set_planet_flag = mineral_menu
		}
	}
	
	ai_weight = {
		weight = 0 #This a player thing only. The AI bypasses needing this.
	}
}

mineral_mine = {
	sound = event_administrative_work
	icon = decision_mining_station
	
	resources = {
		category = decisions
		cost = {
			trigger = {
				is_base_planet = yes
			}
			energy = @BaseEnergyCost
			alloys = @BaseAlloyCost
			minerals = @BaseMineralCost
		}
		cost = {
			trigger = {
				is_difficult_planet = yes
			}
			energy = @DifficultEnergyCost
			alloys = @DifficultAlloyCost
			minerals = @DifficultMineralCost
		}
		cost = {
			trigger = {
				is_vacuum_planet = yes
			}
			energy = @VacuumEnergyCost
			alloys = @VacuumAlloyCost
			minerals = @VacuumMineralCost
		}
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = mineral_menu
		}
		can_build_exploit = yes
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		count_deposits = { type = d_energy_1 count > 0 }
		custom_tooltip = {
			fail_text = "requires_enough_space"
			ROOT = { check_variable = { which = exploitation_size value >= 1 } }
		}
		NOT = {
			is_planet_class = pc_gas_giant
		}
	}

	
	effect = {
		custom_tooltip = mineral_mine_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.102 days = @ConstructionTime }
			add_modifier = { modifier = roci_building_thing }
			set_planet_flag = exploit_building_mines
		}
	}
	
	ai_weight = {
		weight = 0 #Simpler to make the AI just never mix resources on a planet.
		
	}
}

all_mineral_mine = {
	sound = event_administrative_work
	icon = decision_mining_station
	
	resources = {
		category = decisions
		cost = {
		}
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = mineral_menu
		}
		can_build_exploit = yes
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		custom_tooltip = {
			fail_text = "requires_enough_space"
			ROOT = { check_variable = { which = exploitation_size value > 1 } }
		}
		ROOT = { check_variable = { which = exploitation_size value > 1 } }
		NOT = {
			is_planet_class = pc_gas_giant
		}
		NOT = {
			has_modifier = roci_building_thing
		}
	}

	
	effect = {
		custom_tooltip = mineral_mine_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.1 days = -1 }
			set_planet_flag = all_under_construction
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			is_planet_class = pc_molten #Molten worlds are *very* good for an economy. So always colonize them, and always fill them with Lava refineries.
		}
	}
}

0_power_plant_menu = {
	sound = event_administrative_work
	icon = decision_resources
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		can_build_exploit = yes
		solar_system = {
			space_owner = {
				is_ai = no
			}
		}
		has_exploit_technology = yes
	}
	
	allow = {
		always = yes
	}	
	
	effect = {
		if = {
			limit = {
				has_planet_flag = power_plant_menu
			}
			remove_planet_flag = power_plant_menu
		}
		else = {
			set_planet_flag = power_plant_menu
		}
	}
	
	ai_weight = {
		weight = 0 #This a player thing only. The AI bypasses needing this.
	}
}

power_plant = {
	sound = event_administrative_work
	icon = decision_resources
	
	resources = {
		category = decisions
		cost = {
			trigger = {
				is_base_planet = yes
			}
			energy = @BaseEnergyCost
			alloys = @BaseAlloyCost
			minerals = @BaseMineralCost
		}
		cost = {
			trigger = {
				is_difficult_planet = yes
			}
			energy = @DifficultEnergyCost
			alloys = @DifficultAlloyCost
			minerals = @DifficultMineralCost
		}
		cost = {
			trigger = {
				is_vacuum_planet = yes
			}
			energy = @VacuumEnergyCost
			alloys = @VacuumAlloyCost
			minerals = @VacuumMineralCost
		}
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = power_plant_menu
		}
		can_build_exploit = yes
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		custom_tooltip = {
			fail_text = "requires_enough_space"
			ROOT = { check_variable = { which = exploitation_size value >= 1 } }
		}
	}	
	
	effect = {
		custom_tooltip = power_plant_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.202 days = @ConstructionTime  }
			add_modifier = { modifier = roci_building_thing }
			set_planet_flag = exploit_building_power
		}
	}
	
	ai_weight = {
		weight = 0 #Simpler to make the AI just never mix resources on a planet.
	}
}

all_power_plant = {
	sound = event_administrative_work
	icon = decision_resources
	
	resources = {
		category = decisions
		cost = {		
		}
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = power_plant_menu
		}
		can_build_exploit = yes
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		custom_tooltip = {
			fail_text = "requires_enough_space"
			ROOT = { check_variable = { which = exploitation_size value >= 1 } }
		}
	}	
	
	effect = {
		custom_tooltip = power_plant_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.2 days = -1 }
			set_planet_flag = all_under_construction
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			is_planet_class = pc_molten #Molten worlds are *very* good for an economy. So always colonize them, and always fill them with Lava refineries.
		}
	}
}

0_alloy_menu = {
	sound = event_administrative_work
	icon = decision_resources
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		can_build_exploit = yes
		solar_system = {
			space_owner = {
				is_ai = no
			}
		}
		has_exploit_technology = yes
	}
	
	allow = {
		always = yes
	}	
	
	effect = {
		if = {
			limit = {
				has_planet_flag = alloy_menu
			}
			remove_planet_flag = alloy_menu
		}
		else = {
			set_planet_flag = alloy_menu
		}
	}
	
	ai_weight = {
		weight = 0 #This a player thing only. The AI bypasses needing this.
	}
}

alloy_processing = {
	sound = event_administrative_work
	icon = decision_resources
	
	resources = {
		category = decisions
		cost = {
			volatile_motes = @BaseSRCost
		}
		cost = {
			trigger = {
				is_base_planet = yes
			}
			energy = @BaseEnergyCost
			alloys = @BaseAlloyCost
			minerals = @BaseMineralCost
		}
		cost = {
			trigger = {
				is_difficult_planet = yes
			}
			energy = @DifficultEnergyCost
			alloys = @DifficultAlloyCost
			minerals = @DifficultMineralCost
		}
		cost = {
			trigger = {
				is_vacuum_planet = yes
			}
			energy = @VacuumEnergyCost
			alloys = @VacuumAlloyCost
			minerals = @VacuumMineralCost
		}
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		has_planet_flag = alloy_menu
		can_build_exploit = yes
		NOR = {
			is_planet_class = pc_gas_giant
		}
		has_deposit = d_minerals_1
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		OR = {
			AND = {
				count_deposits = { type = d_energy_1 count > 0 }
				count_deposits = { type = d_minerals_1 count > 1 }
			}
			custom_tooltip = {
				fail_text = "requires_enough_space"
				ROOT = { check_variable = { which = exploitation_size value >= 1 } }
			}
		}
	}	
	
	effect = {
		custom_tooltip = alloy_foundry_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.402 days = @ConstructionTime }
			add_modifier = { modifier = roci_building_thing }
			set_planet_flag = exploit_building_foundry
		}
	}
	
	
	ai_weight = {
		weight = 0 #Simpler to make the AI just never mix resources on a planet.
	}
}

all_alloy_processing = {
	sound = event_administrative_work
	icon = decision_resources
	
	resources = {
		category = decisions
		cost = {
			
		}
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		has_planet_flag = alloy_menu
		can_build_exploit = yes
		NOR = {
			is_planet_class = pc_gas_giant
		}
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		custom_tooltip = {
			fail_text = "requires_enough_space"
			ROOT = { check_variable = { which = exploitation_size value >= 3 } }
		}
	}	
	
	effect = {
		custom_tooltip = alloy_foundry_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.4 days = -1  }
			set_planet_flag = all_under_construction
		}
	}
	
	
	ai_weight = {
		weight = 0 #Simpler to make the AI just never mix resources on a planet.
	}
}

alloy_mining = {
	sound = event_administrative_work
	icon = decision_mining_station
	
	resources = {
		category = decisions
		cost = {
			trigger = {
				is_base_planet = yes
			}
			energy = @BaseEnergyCost
			alloys = @BaseAlloyCost
			minerals = @BaseMineralCost
		}
		cost = {
			trigger = {
				is_difficult_planet = yes
			}
			energy = @DifficultEnergyCost
			alloys = @DifficultAlloyCost
			minerals = @DifficultMineralCost
		}
		cost = {
			trigger = {
				is_vacuum_planet = yes
			}
			energy = @VacuumEnergyCost
			alloys = @VacuumAlloyCost
			minerals = @VacuumMineralCost
		}
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = alloy_menu
		}
		can_build_exploit = yes
		OR = {
			is_planet_class = pc_asteroid
			is_planet_class = pc_shattered
			is_planet_class = pc_shattered_2
		}
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		OR = {
			count_deposits = { type = d_energy_1 count > 0 }
			custom_tooltip = {
				fail_text = "requires_enough_space"
				ROOT = { check_variable = { which = exploitation_size value >= 1 } }
			}
		}
	}	
	
	effect = {
		custom_tooltip = alloy_mine_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.502 days = @ConstructionTime  }
			add_modifier = { modifier = roci_building_thing }
			set_planet_flag = exploit_building_alloys
		}
	}
	
	ai_weight = {
		weight = 0 #Simpler to make the AI just never mix resources on a planet.
	}
}

all_alloy_mine = {
	sound = event_administrative_work
	icon = decision_mining_station
	
	resources = {
		category = decisions
		cost = {
		}
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = alloy_menu
		}
		can_build_exploit = yes
		OR = {
			is_planet_class = pc_asteroid
			is_planet_class = pc_shattered
			is_planet_class = pc_shattered_2
		}
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		custom_tooltip = {
			fail_text = "requires_enough_space"
			ROOT = { check_variable = { which = exploitation_size value >= 3 } }
		}
	}

	
	effect = {
		custom_tooltip = alloy_mine_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.5 days = -1 }
			set_planet_flag = all_under_construction
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			is_planet_class = pc_molten #Molten worlds are *very* good for an economy. So always colonize them, and always fill them with Lava refineries.
		}
	}
}



0_rare_resources_menu = {
	sound = event_administrative_work
	icon = decision_resources
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		can_build_exploit = yes
		solar_system = {
			space_owner = {
				is_ai = no
			}
		}
		OR = {
			is_planet_class = pc_molten
			is_planet_class = pc_gas_giant
			is_planet_class = pc_toxic
			is_planet_class = pc_rare_crystal_asteroid
			is_planet_class = pc_ice_asteroid
		}
		has_exploit_technology = yes
	}
	
	allow = {
	}	
	
	effect = {
		if = {
			limit = {
				has_planet_flag = rare_resources_menu
			}
			remove_planet_flag = rare_resources_menu
		}
		else = {
			set_planet_flag = rare_resources_menu
		}
	}
	
	ai_weight = {
		weight = 0 #This a player thing only. The AI bypasses needing this.
	}
}

volatile_motes_mining = {
	sound = event_administrative_work
	icon = decision_drilling_for_gas
	
	resources = {
		category = decisions
		cost = {
			trigger = {
				is_base_planet = yes
			}
			energy = @BaseEnergyCost
			alloys = @BaseAlloyCost
			minerals = @BaseMineralCost
		}
		cost = {
			trigger = {
				is_difficult_planet = yes
			}
			energy = @DifficultEnergyCost
			alloys = @DifficultAlloyCost
			minerals = @DifficultMineralCost
		}
		cost = {
			trigger = {
				is_vacuum_planet = yes
			}
			energy = @VacuumEnergyCost
			alloys = @VacuumAlloyCost
			minerals = @VacuumMineralCost
		}
	}
	
	prerequisites = {
		"tech_mine_volatile_motes"
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = rare_resources_menu
		}
		can_build_exploit = yes
		is_planet_class = pc_molten
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		OR = {
			count_deposits = { type = d_energy_1 count > 0 }
			custom_tooltip = {
				fail_text = "requires_enough_space"
				ROOT = { check_variable = { which = exploitation_size value >= 1 } }
			}
		}
	}	
	
	effect = {
		custom_tooltip = motes_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.702 days = @ConstructionTime  }
			add_modifier = { modifier = roci_building_thing }
			set_planet_flag = exploit_building_motes
		}
	}
	
	ai_weight = {
		weight = 0 #Simpler to make the AI just never mix resources on a planet.
	}
}

all_volatile_motes_mining = {
	sound = event_administrative_work
	icon = decision_mining_station
	
	resources = {
		category = decisions
		cost = {
		}
	}
	
	prerequisites = {
		"tech_mine_volatile_motes"
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = rare_resources_menu
		}
		can_build_exploit = yes
		is_planet_class = pc_molten
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		custom_tooltip = {
			fail_text = "requires_enough_space"
			ROOT = { check_variable = { which = exploitation_size value >= 2 } }
		}
	}

	
	effect = {
		custom_tooltip = motes_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.7 days = -1 }
			set_planet_flag = all_under_construction
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			is_planet_class = pc_molten #Molten worlds are *very* good for an economy. So always colonize them, and always fill them with Lava refineries.
		}
	}
}

exotic_gases_collection = {
	sound = event_administrative_work
	icon = decision_drilling_for_gas
	
	resources = {
		category = decisions
		cost = {
			trigger = {
				is_base_planet = yes
			}
			energy = @BaseEnergyCost
			alloys = @BaseAlloyCost
			minerals = @BaseMineralCost
		}
		cost = {
			trigger = {
				is_difficult_planet = yes
			}
			energy = @DifficultEnergyCost
			alloys = @DifficultAlloyCost
			minerals = @DifficultMineralCost
		}
		cost = {
			trigger = {
				is_vacuum_planet = yes
			}
			energy = @VacuumEnergyCost
			alloys = @VacuumAlloyCost
			minerals = @VacuumMineralCost
		}
	}
	
	prerequisites = {
		"tech_mine_exotic_gases"
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = rare_resources_menu
		}
		can_build_exploit = yes
		OR = {
			is_planet_class = pc_gas_giant
			is_planet_class = pc_toxic
		}
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		OR = {
			count_deposits = { type = d_energy_1 count > 0 }
			custom_tooltip = {
				fail_text = "requires_enough_space"
				ROOT = { check_variable = { which = exploitation_size value >= 1 } }
			}
		}
	}	
	
	effect = {
		custom_tooltip = gases_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.902 days = @ConstructionTime  }
			add_modifier = { modifier = roci_building_thing }
			set_planet_flag = exploit_building_gases
		}
	}
	
	ai_weight = {
		weight = 0 #Simpler to make the AI just never mix resources on a planet.
	}
}

all_exotic_gases_collection = {
	sound = event_administrative_work
	icon = decision_mining_station
	
	resources = {
		category = decisions
		cost = {
		}
	}
	
	prerequisites = {
		"tech_mine_exotic_gases"
	}
	
	potential = {
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = rare_resources_menu
		}
		can_build_exploit = yes
		OR = {
			is_planet_class = pc_gas_giant
			is_planet_class = pc_toxic
		}
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		custom_tooltip = {
			fail_text = "requires_enough_space"
			ROOT = { check_variable = { which = exploitation_size value >= 2 } }
		}
	}

	
	effect = {
		custom_tooltip = gases_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.9 days = -1 }
			set_planet_flag = all_under_construction
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			is_planet_class = pc_molten #Molten worlds are *very* good for an economy. So always colonize them, and always fill them with Lava refineries.
		}
	}
}

rare_crystals_mining = {
	sound = event_administrative_work
	icon = decision_drilling_for_gas
	
	resources = {
		category = decisions
		cost = {
			trigger = {
				is_base_planet = yes
			}
			energy = @BaseEnergyCost
			alloys = @BaseAlloyCost
			minerals = @BaseMineralCost
		}
		cost = {
			trigger = {
				is_difficult_planet = yes
			}
			energy = @DifficultEnergyCost
			alloys = @DifficultAlloyCost
			minerals = @DifficultMineralCost
		}
		cost = {
			trigger = {
				is_vacuum_planet = yes
			}
			energy = @VacuumEnergyCost
			alloys = @VacuumAlloyCost
			minerals = @VacuumMineralCost
		}
	}
	
	prerequisites = {
		"tech_mine_rare_crystals"
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = rare_resources_menu
		}
		can_build_exploit = yes
		OR = {
			is_planet_class = pc_rare_crystal_asteroid
			is_planet_class = pc_ice_asteroid
		}
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		OR = {
			count_deposits = { type = d_energy_1 count > 0 }
			custom_tooltip = {
				fail_text = "requires_enough_space"
				ROOT = { check_variable = { which = exploitation_size value >= 1 } }
			}
		}
	}	
	
	effect = {
		custom_tooltip = crystals_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.802 days = @ConstructionTime  }
			add_modifier = { modifier = roci_building_thing }
			set_planet_flag = exploit_building_crystals
		}
	}
	
	ai_weight = {
		weight = 0 #Simpler to make the AI just never mix resources on a planet.
	}
}

all_rare_crystals_mining = {
	sound = event_administrative_work
	icon = decision_mining_station
	
	resources = {
		category = decisions
		cost = {
		}
	}
	
	prerequisites = {
		"tech_mine_rare_crystals"
	}
	
	potential = {
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = rare_resources_menu
		}
		can_build_exploit = yes
		OR = {
			is_planet_class = pc_rare_crystal_asteroid
			is_planet_class = pc_ice_asteroid
		}
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		custom_tooltip = {
			fail_text = "requires_enough_space"
			ROOT = { check_variable = { which = exploitation_size value >= 2 } }
		}
	}

	
	effect = {
		custom_tooltip = crystals_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.8 days = -1 }
			set_planet_flag = all_under_construction
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			is_planet_class = pc_molten #Molten worlds are *very* good for an economy. So always colonize them, and always fill them with Lava refineries.
		}
	}
}

lava_refinery = {
	sound = event_administrative_work
	icon = decision_resources
	
	resources = {
		category = decisions
		cost = {
			trigger = {
				is_base_planet = yes
			}
			energy = @AdvancedBaseEnergyCost
			alloys = @AdvancedBaseAlloyCost
			minerals = @AdvancedBaseMineralCost
		}
		cost = {
			trigger = {
				is_difficult_planet = yes
			}
			energy = @AdvancedDifficultEnergyCost
			alloys = @AdvancedDifficultAlloyCost
			minerals = @AdvancedDifficultMineralCost
		}
		cost = {
			trigger = {
				is_vacuum_planet = yes
			}
			energy = @AdvancedVacuumEnergyCost
			alloys = @AdvancedVacuumAlloyCost
			minerals = @AdvancedVacuumMineralCost
		}
	}
	potential = {
		NOT = { has_global_flag = no_exploit }
		can_build_exploit = yes
		is_planet_class = pc_molten
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		custom_tooltip = {
			fail_text = "requires_enough_space"
			ROOT = { check_variable = { which = exploitation_size value >= 1 } }
		}
	}	
	
	effect = {
		custom_tooltip = lava_refinery_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.1002 days = @ConstructionTime  }
			add_modifier = { modifier = roci_building_thing }
			set_planet_flag = exploit_building_lava
		}
	}
	
	ai_weight = {
		weight = 0 #Simpler to make the AI just never mix resources on a planet.
	}
}

all_lava_refinery = {
	sound = event_administrative_work
	icon = decision_resources
	
	resources = {
		category = decisions
		cost = {
		}
	}
	potential = {
		NOT = { has_global_flag = no_exploit }
		can_build_exploit = yes
		is_planet_class = pc_molten
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		custom_tooltip = {
			fail_text = "requires_enough_space"
			ROOT = { check_variable = { which = exploitation_size value >= 1 } }
		}
	}	
	
	effect = {
		custom_tooltip = lava_refinery_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.10 days = -1 }
			set_planet_flag = all_under_construction
		}
	}
	
	ai_weight = {
		weight = 10000 #Since this can only go on molten worlds, and it is objectively better, make the AI always do it.
	}
}

0_research_menu = {
	sound = event_administrative_work
	icon = decision_resources
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		can_build_exploit = yes
		solar_system = {
			space_owner = {
				is_ai = no
			}
		}
		has_exploit_technology = yes
	}
	
	allow = {
	}	
	
	effect = {
		if = {
			limit = {
				has_planet_flag = research_menu
			}
			remove_planet_flag = research_menu
		}
		else = {
			set_planet_flag = research_menu
		}
	}
	
	ai_weight = {
		weight = 0 #This a player thing only. The AI bypasses needing this.
	}
}

research = {
	sound = event_administrative_work
	icon = decision_glitchy_matrix
	
	resources = {
		category = decisions
		cost = {
			exotic_gases = @BaseSRCost
		}
		cost = {
			trigger = {
				is_base_planet = yes
			}
			energy = @AdvancedBaseEnergyCost
			alloys = @AdvancedBaseAlloyCost
			minerals = @AdvancedBaseMineralCost
		}
		cost = {
			trigger = {
				is_difficult_planet = yes
			}
			energy = @AdvancedDifficultEnergyCost
			alloys = @AdvancedDifficultAlloyCost
			minerals = @AdvancedDifficultMineralCost
		}
		cost = {
			trigger = {
				is_vacuum_planet = yes
			}
			energy = @AdvancedVacuumEnergyCost
			alloys = @AdvancedVacuumAlloyCost
			minerals = @AdvancedVacuumMineralCost
		}
	}
	potential = {
		NOT = { has_global_flag = no_exploit }
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = research_menu
		}
		can_build_exploit = yes
		NOR = {
			is_planet_class = pc_ice_asteroid
			is_planet_class = pc_asteroid
			is_planet_class = pc_rare_crystal_asteroid
		}
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		OR = {
			count_deposits = { type = d_energy_1 count >= 2 }
			custom_tooltip = {
				fail_text = "requires_enough_space"
				ROOT = { check_variable = { which = exploitation_size value >= 1 } }
			}
		}
	}	
	
	effect = {
		custom_tooltip = research_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.1202 days = @ConstructionTime  }
			add_modifier = { modifier = roci_building_thing }
			set_planet_flag = exploit_building_research
		}
	}
	
	ai_weight = {
		weight = 0 #Simpler to make the AI just never mix resources on a planet.
	}
}

all_research = {
	sound = event_administrative_work
	icon = decision_resources
	
	resources = {
		category = decisions
		cost = {
		}
	}
	
	potential = {
		NOT = { has_global_flag = no_exploit }
		OR = {
			solar_system = {
				space_owner = {
					is_ai = yes
				}
			}
			has_planet_flag = research_menu
		}
		can_build_exploit = yes
		has_exploit_technology = yes
	}
	
	allow = {
		custom_tooltip = {
			fail_text = "requires_not_selected_construction"
			NOT = { has_perm_flag = yes }
		}
		custom_tooltip = {
			fail_text = "requires_enough_space"
			ROOT = { check_variable = { which = exploitation_size value >= 2 } }
		}
	}	
	
	effect = {
		custom_tooltip = research_effects
		hidden_effect = {
			planet_event = { id = spaceexploit.12 days = -1 }
			set_planet_flag = all_under_construction
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			is_planet_class = pc_molten #Molten worlds are *very* good for an economy. So always colonize them, and always fill them with Lava refineries.
		}
	}
}