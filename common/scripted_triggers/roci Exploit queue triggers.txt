is_base_planet = {
	OR = {
		is_planet_class = pc_barren
		is_planet_class = pc_barren_cold
		
		#PD
		is_planet_class = pc_chthonian #Normal Barren
		is_planet_class = pc_diamond # Minerals
		is_planet_class = pc_carbon # Normal Barren
		is_planet_class = pc_iron # Alloy Mining, Engineering
	}
}

is_difficult_planet = {
	OR = {
		is_planet_class = pc_molten
		is_planet_class = pc_toxic
		is_planet_class = pc_frozen
		NOR = {
			is_base_planet = yes
			is_planet_class = pc_molten
			is_planet_class = pc_toxic
			is_planet_class = pc_frozen
			is_planet_class = pc_broken
			is_vacuum_planet = yes
		}
		
		#PD
		is_planet_class = pc_volcanic #Same as Molten
		is_planet_class = pc_ethane_ocean # Energy
		is_planet_class = pc_hothouse # Society
		is_planet_class = pc_hydrocarbon #Energy
 		is_planet_class = pc_subglacial # Society	
	}
}

is_vacuum_planet = {
	OR = {
		is_planet_class = pc_gas_giant
		is_planet_class = pc_asteroid
		is_planet_class = pc_ice_asteroid
		is_planet_class = pc_rare_crystal_asteroid
		is_planet_class = pc_broken
		is_planet_class = pc_shattered
		is_planet_class = pc_shattered_2
		
		#PD
		is_planet_class = pc_hot_gas_giant # Energy, Physics
 		is_planet_class = pc_cloudless_gas_giant # Energy, Physics
		is_planet_class = pc_cold_gas_giant # Energy, Physics
	}
}

#System Scope
system_has_colonizeable_planet = {
	any_system_planet = {
		NOT = { has_modifier = colonized_planet }
		has_exploit_technology = yes
		can_build_exploit_colony = yes
	}
}

system_has_colonizeable_power_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	space_owner = { NOT = { has_country_flag = exploit_power_off } }
}

system_has_colonizeable_mine_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	NOT = { is_planet_class = pc_gas_giant }
	space_owner = { NOT = { has_country_flag = exploit_mine_off } }
}

system_has_colonizeable_alloy_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	OR = {
		is_planet_class = pc_asteroid
		is_planet_class = pc_broken
		is_planet_class = pc_shattered
		is_planet_class = pc_shattered_2
		
		#PD
		is_planet_class = pc_iron
	}
	space_owner = { NOT = { has_country_flag = exploit_alloy_mine_off } }
}

system_has_colonizeable_foundry_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	space_owner = { NOT = { has_country_flag = exploit_alloy_foundry_off } }
}

system_has_colonizeable_research_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	space_owner = { NOT = { has_country_flag = exploit_research_off } }
}

system_has_colonizeable_lava_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	OR = {
		is_planet_class = pc_molten
	
		#PD
		is_planet_class = pc_volcanic
	}
	space_owner = { NOT = { has_country_flag = exploit_lava_refinery_off } }
}

system_has_colonizeable_mote_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	OR = {
		is_planet_class = pc_molten
	
		#PD
		is_planet_class = pc_volcanic
	}
	space_owner = { NOT = { has_country_flag = exploit_motes_off } }
}

system_has_colonizeable_gas_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	OR = {
		is_planet_class = pc_gas_giant
		is_planet_class = pc_toxic
		
		#PD
		is_planet_class = pc_hot_gas_giant
		is_planet_class = pc_cloudless_gas_giant
		is_planet_class = pc_cold_gas_giant
	}
	space_owner = { NOT = { has_country_flag = exploit_gases_off } }
}

system_has_colonizeable_crystal_planet = {
	NOT = { has_modifier = colonized_planet }
	has_exploit_technology = yes
	can_build_exploit_colony = yes
	OR = {
		is_planet_class = pc_rare_crystal_asteroid
		is_planet_class = pc_ice_asteroid
	}
	space_owner = { NOT = { has_country_flag = exploit_crystals_off } }
}

#System Scope
system_has_exploit = {
	OR = {
		starbase = {
			has_starbase_building = transit_hub
		}
		any_system_planet = {
			has_planet_flag = exploit_center
		}
	}
}

#System Scope
system_has_viable_exploit_host = {
	NOT = { any_system_planet = {
		has_planet_flag = exploit_center
	} }
	any_system_planet = {
		NOT = { has_planet_flag = exploit_center }
		is_major_colony = yes
	}
}

has_perm_flag = {
	OR = {
		has_planet_flag = exploit_mine_loop
		has_planet_flag = exploit_power_loop
		has_planet_flag = exploit_alloy_mine_loop
		has_planet_flag = exploit_alloy_foundry_loop
		has_planet_flag = exploit_lava_refinery_loop
		has_planet_flag = exploit_research_loop
		has_planet_flag = exploit_motes_loop
		has_planet_flag = exploit_gases_loop
		has_planet_flag = exploit_crystals_loop
	}
}

has_exploit_batch_flag = {
	OR = {
		has_planet_flag = exploit_mine_batch
		has_planet_flag = exploit_power_batch
		has_planet_flag = exploit_alloy_mine_batch
		has_planet_flag = exploit_alloy_foundry_batch
		has_planet_flag = exploit_lava_refinery_batch
		has_planet_flag = exploit_research_batch
		has_planet_flag = exploit_motes_batch
		has_planet_flag = exploit_gases_batch
		has_planet_flag = exploit_crystals_batch
	}	
}

#Country Scope
has_exploit_queue = {
	OR = {
		check_variable = { which = exploit_power_plant_queue value > 0 }
		check_variable = { which = exploit_mineral_mine_queue value > 0 }
		check_variable = { which = exploit_alloy_queue value > 0 }
		check_variable = { which = exploit_foundry_queue value > 0 }
		check_variable = { which = exploit_research_queue value > 0 }
		check_variable = { which = exploit_lava_refinery_queue value > 0 }
		check_variable = { which = exploit_motes_queue value > 0 }
		check_variable = { which = exploit_gases_queue value > 0 }
		check_variable = { which = exploit_crystals_queue value > 0 }
	}
}

#Planet Scope
has_exploit_technology = {
	exists = space_owner
	OR = {
		AND = {
			OR = {
				is_planet_class = pc_barren
				is_planet_class = pc_barren_cold
				
				#PD
				is_planet_class = pc_chthonian #Normal Barren
				is_planet_class = pc_diamond # Minerals
				is_planet_class = pc_carbon # Normal Barren
				is_planet_class = pc_iron # Alloy Mining, Engineering
			}
			space_owner = { NOT = { has_country_flag = exploit_barren_off } }
		}
		AND = {
			OR = {
				is_planet_class = pc_molten
			
				#PD
				is_planet_class = pc_volcanic
			}
			space_owner = { NOT = { has_country_flag = exploit_molten_off } }
		}
		AND = {
			OR = {
				is_planet_class = pc_toxic
				is_planet_class = pc_ethane_ocean # Energy
				is_planet_class = pc_hothouse # Society
				is_planet_class = pc_hydrocarbon #Energy
			}
			space_owner = { NOT = { has_country_flag = exploit_toxic_off } }
		}
		AND = {
			OR = {
				is_planet_class = pc_frozen
				is_planet_class = pc_subglacial # Society
			}
			space_owner = { NOT = { has_country_flag = exploit_frozen_off } }
		}
		AND = {
			OR = {
				is_planet_class = pc_asteroid
				is_planet_class = pc_rare_crystal_asteroid
			}
			space_owner = { NOT = { has_country_flag = exploit_asteroid_off } }
		}
		
		
		
		AND = {
			is_planet_class = pc_ice_asteroid
			space_owner = { NOT = { has_country_flag = exploit_ice_asteroid_off } }
		}
		AND = {
			OR = {
				is_planet_class = pc_gas_giant
				
				#PD
				is_planet_class = pc_hot_gas_giant
				is_planet_class = pc_cloudless_gas_giant
				is_planet_class = pc_cold_gas_giant
			}
			space_owner = { NOT = { has_country_flag = exploit_gas_giant_off } }
			space_owner = { has_technology = tech_habitat_1 }
		}
		AND = {
			OR = {
				is_planet_class = pc_shattered
				is_planet_class = pc_shattered_2
				is_planet_class = pc_broken
			}
			space_owner = { NOT = { has_country_flag = exploit_shattered_off } }
		}
	}
}

#Planet scope
can_build_exploit_colony = {
	OR = {
		AND = {
			is_base_planet = yes
			base_planet_cost_check = yes
		}
		AND = {
			is_difficult_planet = yes
			difficult_planet_cost_check = yes
		}
		AND = {
			is_vacuum_planet = yes
			vacuum_planet_cost_check = yes
		}
	}
}
can_build_exploit_mine = {
	can_build_exploit = yes
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 0 }
	OR = {
		AND = {
			is_base_planet = yes
			base_planet_cost_check = yes
		}
		AND = {
			is_difficult_planet = yes
			difficult_planet_cost_check = yes
		}
		AND = {
			is_vacuum_planet = yes
			vacuum_planet_cost_check = yes
		}
	}
}
can_build_exploit_power = {
	can_build_exploit = yes
	check_variable = { which = exploitation_size value > 0 }
	OR = {
		AND = {
			is_base_planet = yes
			base_planet_cost_check = yes
		}
		AND = {
			is_difficult_planet = yes
			difficult_planet_cost_check = yes
		}
		AND = {
			is_vacuum_planet = yes
			vacuum_planet_cost_check = yes
		}
	}
}
can_build_exploit_alloy_mine = {
	can_build_exploit = yes
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 0 }
	OR = {
		AND = {
			is_base_planet = yes
			base_planet_cost_check = yes
		}
		AND = {
			is_difficult_planet = yes
			difficult_planet_cost_check = yes
		}
		AND = {
			is_vacuum_planet = yes
			vacuum_planet_cost_check = yes
		}
	}
}
can_build_exploit_alloy_foundry = {
	can_build_exploit = yes
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 0 }
	count_deposits = { type = d_minerals_1 count > 1 }
	OR = {
		AND = {
			is_base_planet = yes
			base_planet_cost_check = yes
		}
		AND = {
			is_difficult_planet = yes
			difficult_planet_cost_check = yes
		}
		AND = {
			is_vacuum_planet = yes
			vacuum_planet_cost_check = yes
		}
	}
}
can_build_exploit_lava_refinery = {
	can_build_exploit = yes
	check_variable = { which = exploitation_size value > 0 }
	OR = {
		AND = {
			is_base_planet = yes
			advanced_base_planet_cost_check = yes
		}
		AND = {
			is_difficult_planet = yes
			advanced_difficult_planet_cost_check = yes
		}
		AND = {
			is_vacuum_planet = yes
			advanced_vacuum_planet_cost_check = yes
		}
	}
}
can_build_exploit_research = {
	can_build_exploit = yes
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 1 }
	OR = {
		AND = {
			is_base_planet = yes
			advanced_base_planet_cost_check = yes
		}
		AND = {
			is_difficult_planet = yes
			advanced_difficult_planet_cost_check = yes
		}
		AND = {
			is_vacuum_planet = yes
			advanced_vacuum_planet_cost_check = yes
		}
	}
}
can_build_exploit_motes = {
	can_build_exploit = yes
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 1 }
	OR = {
		AND = {
			is_base_planet = yes
			base_planet_cost_check = yes
		}
		AND = {
			is_difficult_planet = yes
			difficult_planet_cost_check = yes
		}
		AND = {
			is_vacuum_planet = yes
			vacuum_planet_cost_check = yes
		}
	}
}
can_build_exploit_gases = {
	can_build_exploit = yes
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 1 }
	OR = {
		AND = {
			is_base_planet = yes
			base_planet_cost_check = yes
		}
		AND = {
			is_difficult_planet = yes
			difficult_planet_cost_check = yes
		}
		AND = {
			is_vacuum_planet = yes
			vacuum_planet_cost_check = yes
		}
	}
}
can_build_exploit_crystals = {
	can_build_exploit = yes
	check_variable = { which = exploitation_size value > 0 }
	count_deposits = { type = d_energy_1 count > 1 }
	OR = {
		AND = {
			is_base_planet = yes
			base_planet_cost_check = yes
		}
		AND = {
			is_difficult_planet = yes
			difficult_planet_cost_check = yes
		}
		AND = {
			is_vacuum_planet = yes
			vacuum_planet_cost_check = yes
		}
	}
}