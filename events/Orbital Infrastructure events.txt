namespace = orbitalinfra

country_event = {
	id = orbitalinfra.1000
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		log = "orbital game start for [This.GetName]"
		if = {
			limit = {
				is_country_type = default
			}
			set_variable = { which = orbitalinfra_military_platforms value = 2 }
			set_variable = { which = orbitalinfra_military_ion_cannons value = 0 }
			capital_scope = {
				if = {
					limit = {
						NOT = { is_artificial = yes }
					}
					#log = "Orbital Infrastructure on [This.GetName] for [PREV.GetName]"
					set_infrastructure_amount = yes
					set_planet_flag = has_orbital_infrastructure
					add_building = building_space_elevator_2
					set_variable = { which = orbital_infrastructure value = 1 }
					add_district = district_orbital_platform_city
					remove_district = district_city
					while = {
						count = 10
						add_deposit = orbital_platform
					}
					add_district = district_orbital_platform_industrial
					add_district = district_orbital_platform_industrial
					add_district = district_orbital_platform_research
					add_district = district_orbital_platform_solar_array
					add_district = district_orbital_platform_solar_array
					add_district = district_orbital_platform_mining
					update_oi_district_counts = yes
				}
			}
		}
	}
}

country_event = {
	id = orbitalinfra.1
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		#log = "OrbitalInfra tech increased"
		if = {
			limit = {
				OR = {
					last_increased_tech = tech_starbase_3
					last_increased_tech = tech_starbase_4
				}
			}
			change_variable = { which = orbitalinfra_military_platforms value = 1 }
			every_owned_planet = {
				limit = {
					has_oi_space_elevator = yes
				}
				upgrade_infrastructure_amount = yes
			}
		}
		else_if = {
			limit = {
				OR = {
					last_increased_tech = tech_starbase_5
				}
			}
			if = {
				limit = {
					host_has_dlc = "Apocalypse"
				}
				change_variable = { which = orbitalinfra_military_ion_cannons value = 1 }
			}
			else = {
				change_variable = { which = orbitalinfra_military_platforms value = 2 }
			}
			every_owned_planet = {
				limit = {
					has_oi_space_elevator = yes
				}
				upgrade_infrastructure_amount = yes
			}
		}
		else_if = {
			limit = {
				OR = {
					last_increased_tech = tech_habitat_1
					last_increased_tech = tech_habitat_2
					last_increased_tech = tech_habitat_3
				}
			}
			every_owned_planet = {
				limit = {
					has_oi_space_elevator = yes
				}
				upgrade_infrastructure_amount = yes
			}
		}
	}
}
planet_event = {
	id = orbitalinfra.2
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		log = "OrbitalInfra district changed"
		if = {
			limit = {
				#always = no
				owner = { is_ai = yes }
				has_oi_space = yes
				has_space_elevator_support = yes
			}
			log = "AI Orbital district Swap on [This.GetName]"
			switch = {
				trigger = last_district_changed
				district_orbital_expansion = {
					remove_district = district_orbital_expansion
					add_deposit = orbital_platform
					change_variable = { which = orbital_infrastructure_space value = -1 }
					hidden_effect = {
						owner = {
							if = {
								limit = {
									is_ai = yes
								}
								add_resource = {
									alloys = -150
								}
							}
						}
					}
				}
				district_generator = {
					if = {
						limit = {
							num_districts = { type = district_generator value > orbitalinfra_solar }
						}
						remove_district = district_generator
						add_district = district_orbital_platform_solar_array
						change_variable = { which = orbitalinfra_solar value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital Generator district Swap on [This.GetName]"
					}
				}
				district_generator_uncapped = {
					if = {
						limit = {
							num_districts = { type = district_generator_uncapped value > orbitalinfra_solar }
						}
						remove_district = district_generator_uncapped
						add_district = district_orbital_platform_solar_array
						change_variable = { which = orbitalinfra_solar value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital Generator district Swap on [This.GetName]"
					}
				}
				district_mining = {
					if = {
						limit = {
							num_districts = { type = district_mining value > orbitalinfra_mining }
							OR = {
								AND = {
									is_moon = yes
									planet = {
										uninhabitable_regular_planet = yes
									}
								}
								AND = {
									has_moon = yes
									any_moon = {
										uninhabitable_regular_planet = yes
									}
								}
								solar_system = {
									any_system_planet = {
										is_asteroid = yes
									}
								}
							}
						}
						remove_district = district_mining
						add_district = district_orbital_platform_mining
						change_variable = { which = orbitalinfra_mining value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital Mining district Swap on [This.GetName]"
					}
				}
				district_mining_uncapped = {
					if = {
						limit = {
							num_districts = { type = district_mining_uncapped value > orbitalinfra_mining }
							OR = {
								AND = {
									is_moon = yes
									planet = {
										uninhabitable_regular_planet = yes
									}
								}
								AND = {
									has_moon = yes
									any_moon = {
										uninhabitable_regular_planet = yes
									}
								}
								solar_system = {
									any_system_planet = {
										is_asteroid = yes
									}
								}
							}
						}
						remove_district = district_mining_uncapped
						add_district = district_orbital_platform_mining
						change_variable = { which = orbitalinfra_mining value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital Mining district Swap on [This.GetName]"
					}
				}
				district_farming = {
					if = {
						limit = {
							num_districts = { type = district_farming value > orbitalinfra_farming }
						}
						remove_district = district_farming
						add_district = district_orbital_platform_farming
						change_variable = { which = orbitalinfra_farming value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital Farming district Swap on [This.GetName]"
					}
				}
				district_farming_uncapped = {
					if = {
						limit = {
							num_districts = { type = district_farming_uncapped value > orbitalinfra_farming }
						}
						remove_district = district_farming_uncapped
						add_district = district_orbital_platform_farming
						change_variable = { which = orbitalinfra_farming value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital Farming district Swap on [This.GetName]"
					}
				}
				district_city = {
					if = {
						limit = {
							num_districts = { type = district_city value > orbitalinfra_cities }
						}
						remove_district = district_city
						add_district = district_orbital_platform_city
						change_variable = { which = orbitalinfra_cities value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital City district Swap on [This.GetName]"
					}
				}
				district_hive = {
					if = {
						limit = {
							num_districts = { type = district_hive value > orbitalinfra_cities }
						}
						remove_district = district_hive
						add_district = district_orbital_platform_city
						change_variable = { which = orbitalinfra_cities value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital City district Swap on [This.GetName]"
					}
				}
				district_nexus = {
					if = {
						limit = {
							num_districts = { type = district_nexus value > orbitalinfra_cities }
						}
						remove_district = district_nexus
						add_district = district_orbital_platform_city
						change_variable = { which = orbitalinfra_cities value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital City district Swap on [This.GetName]"
					}
				}
				district_arcology_housing = {
					if = {
						limit = {
							num_districts = { type = district_arcology_housing value > orbitalinfra_cities }
						}
						remove_district = district_arcology_housing
						add_district = district_orbital_platform_city
						change_variable = { which = orbitalinfra_cities value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital City district Swap on [This.GetName]"
					}
				}
				district_industrial = {
					if = {
						limit = {
							num_districts = { type = district_industrial value > orbitalinfra_industry }
						}
						remove_district = district_industrial
						add_district = district_orbital_platform_industrial
						change_variable = { which = orbitalinfra_industry value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital Industry district Swap on [This.GetName]"
					}
				}
				district_arcology_arms_industry = {
					if = {
						limit = {
							num_districts = { type = district_arcology_arms_industry value > orbitalinfra_industry }
						}
						remove_district = district_arcology_arms_industry
						add_district = district_orbital_platform_industrial
						change_variable = { which = orbitalinfra_industry value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital Industry district Swap on [This.GetName]"
					}
				}
				district_arcology_civilian_industry = {
					if = {
						limit = {
							num_districts = { type = district_arcology_civilian_industry value > orbitalinfra_industry }
						}
						remove_district = district_arcology_civilian_industry
						add_district = district_orbital_platform_industrial
						change_variable = { which = orbitalinfra_industry value = 1 }
						change_variable = { which = orbital_infrastructure value = 1 }
						alloy_ai_orbital_cost = yes
						log = "AI Orbital Industry district Swap on [This.GetName]"
					}
				}
			}
		}
		switch = {
			trigger = last_district_changed
			district_orbital_platform_research = {
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
				alloy_ai_orbital_cost = yes
			}
			district_orbital_platform_research_ai = {
				remove_district = district_orbital_platform_research_ai
				add_district = district_orbital_platform_research
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
			}
			district_orbital_platform_industrial = {
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
				alloy_ai_orbital_cost = yes
			}
			district_orbital_platform_industrial_ai = {
				remove_district = district_orbital_platform_industrial_ai
				add_district = district_orbital_platform_industrial
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
			}
			district_orbital_platform_city = {
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
				alloy_ai_orbital_cost = yes
			}
			district_orbital_platform_refinery = {
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
				alloy_ai_orbital_cost = yes
			}
			district_orbital_platform_refinery_ai = {
				remove_district = district_orbital_platform_refinery_ai
				add_district = district_orbital_platform_refinery
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
			}
			district_orbital_platform_farming = {
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
				alloy_ai_orbital_cost = yes
			}
			district_orbital_platform_farming_ai = {
				remove_district = district_orbital_platform_farming_ai
				add_district = district_orbital_platform_farming
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
			}
			district_orbital_platform_mining = {
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
				alloy_ai_orbital_cost = yes
			}
			district_orbital_platform_mining_ai = {
				remove_district = district_orbital_platform_mining_ai
				add_district = district_orbital_platform_mining
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
			}
			district_orbital_platform_commercial = {
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
				alloy_ai_orbital_cost = yes
			}
			district_orbital_platform_solar_array = {
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
				alloy_ai_orbital_cost = yes
			}
			district_orbital_platform_solar_array_ai = {
				remove_district = district_orbital_platform_solar_array_ai
				add_district = district_orbital_platform_solar_array
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
			}
			district_orbital_platform_shipyard = {
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
				alloy_ai_orbital_cost = yes
			}
			district_orbital_platform_shipyard_ai = {
				remove_district = district_orbital_platform_shipyard_ai
				add_district = district_orbital_platform_shipyard
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
			}
			district_orbital_platform_military = {
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
				alloy_ai_orbital_military_cost = yes
			}
			district_orbital_platform_military_ai = {
				remove_district = district_orbital_platform_military_ai
				add_district = district_orbital_platform_military
				update_oi_district_counts = yes
				change_variable = { which = orbital_infrastructure value = 1 }
			}
		} 
	}
}
event = {
	id = orbitalinfra.3
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			limit = {
				check_variable = { which = orbital_infra_ai_alloy_debt value > 0 }
			}
			ai_orbital_pay_alloy_debt = yes
		}
	}
}
event = {
	id = orbitalinfra.4
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			limit = {
				is_ai = yes
			}
			every_owned_planet = {
				limit = {
					has_space_elevator_support = yes
					free_district_slots < 1
				}
				if = {
					limit = {
						NOT = { has_oi_space = yes }
						has_space_elevator_support = yes
						check_variable = { which = orbital_infrastructure_space value > 0 }
						OR = {
							AND = {
								has_active_building = building_space_elevator
								count_deposits = { type = orbital_platform count < 9 }
							}
							AND = {
								has_active_building = building_space_elevator_2
								count_deposits = { type = orbital_platform count < 22 }
							}
							AND = {
								has_active_building = building_space_elevator_3
							}
						}
						owner = {
							resource_stockpile_compare = {
								resource = alloys
								value >= 150
							}
							resource_stockpile_compare = {
								resource = energy
								value >= 150
							}
						}
					
					}
					add_deposit = orbital_platform
					change_variable = { which = orbital_infrastructure_space value = -1 }
					owner = {
						add_resource = {
							alloys = -150
							energy = -150
						}
					}
				}
				if = {
					limit = {
						num_districts = { type = district_generator value > orbitalinfra_solar }
					}
					remove_district = district_generator
					add_district = district_orbital_platform_solar_array
					change_variable = { which = orbitalinfra_solar value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
				else_if = {
					limit = {
						num_districts = { type = district_generator_uncapped value > orbitalinfra_solar }
					}
					remove_district = district_generator_uncapped
					add_district = district_orbital_platform_solar_array
					change_variable = { which = orbitalinfra_solar value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
				else_if = {
					limit = {
						num_districts = { type = district_mining value > orbitalinfra_mining }
					}
					remove_district = district_mining
					add_district = district_orbital_platform_mining
					change_variable = { which = orbitalinfra_mining value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
				else_if = {
					limit = {
						num_districts = { type = district_mining_uncapped value > orbitalinfra_mining }
					}
					remove_district = district_mining_uncapped
					add_district = district_orbital_platform_mining
					change_variable = { which = orbitalinfra_mining value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
				else_if = {
					limit = {
						num_districts = { type = district_farming value > orbitalinfra_farming }
					}
					remove_district = district_farming
					add_district = district_orbital_platform_farming
					change_variable = { which = orbitalinfra_farming value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
				else_if = {
					limit = {
						num_districts = { type = district_farming_uncapped value > orbitalinfra_farming }
					}
					remove_district = district_farming_uncapped
					add_district = district_orbital_platform_farming
					change_variable = { which = orbitalinfra_farming value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
				else_if = {
					limit = {
						num_districts = { type = district_city value > orbitalinfra_cities }
					}
					remove_district = district_city
					add_district = district_orbital_platform_city
					change_variable = { which = orbitalinfra_cities value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
				else_if = {
					limit = {
						num_districts = { type = district_hive value > orbitalinfra_cities }
					}
					remove_district = district_hive
					add_district = district_orbital_platform_city
					change_variable = { which = orbitalinfra_cities value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
				else_if = {
					limit = {
						num_districts = { type = district_nexus value > orbitalinfra_cities }
					}
					remove_district = district_nexus
					add_district = district_orbital_platform_city
					change_variable = { which = orbitalinfra_cities value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
				else_if = {
					limit = {
						num_districts = { type = district_arcology_housing value > orbitalinfra_cities }
					}
					remove_district = district_arcology_housing
					add_district = district_orbital_platform_city
					change_variable = { which = orbitalinfra_cities value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
				else_if = {
					limit = {
						num_districts = { type = district_industrial value > orbitalinfra_industry }
					}
					remove_district = district_industrial
					add_district = district_orbital_platform_industrial
					change_variable = { which = orbitalinfra_industry value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
				else_if = {
					limit = {
						num_districts = { type = district_arcology_arms_industry value > orbitalinfra_industry }
					}
					remove_district = district_arcology_arms_industry
					add_district = district_orbital_platform_industrial
					change_variable = { which = orbitalinfra_industry value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
				else_if = {
					limit = {
						num_districts = { type = district_arcology_civilian_industry value > orbitalinfra_industry }
					}
					remove_district = district_arcology_civilian_industry
					add_district = district_orbital_platform_industrial
					change_variable = { which = orbitalinfra_industry value = 1 }
					change_variable = { which = orbital_infrastructure value = 1 }
					alloy_ai_orbital_cost = yes
				}
			}
		}
	}
}

country_event = {
	id = orbitalinfra.5
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		FROMFROM = {
			if = {
				limit = {
					has_fleet_flag = orbital_infra_defense
				}
				solar_system = {
					every_system_planet = {
						limit = {
							has_district = district_orbital_platform_military
						}
						planet_event = { id = orbitalinfra.6 days = 1 }
					}
				}
			}
		}
		FROMFROMFROM = {
			if = {
				limit = {
					has_fleet_flag = orbital_infra_defense
				}
				solar_system = {
					every_system_planet = {
						limit = {
							has_district = district_orbital_platform_military
						}
						planet_event = { id = orbitalinfra.6 days = 1 }
					}
				}
			}
		}
	}
}
planet_event = {
	id = orbitalinfra.6
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				NOT = { solar_system = { any_fleet_in_system = { owner = { is_hostile = prevprevprev.owner } } } }
			}
			oi_update_platforms = yes
		}
		else = {
			planet_event = { id = orbitalinfra.6 days = 30 }
		}
	}
}
planet_event = {
	id = orbitalinfra.7
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				owner = { is_ai = yes }
			}
			if = {
				limit = {
					has_upgraded_capital = yes
					NOR = {
						has_building = building_space_elevator
						has_building = building_space_elevator_2
						has_building = building_space_elevator_3
					}
				}
				add_building = building_space_elevator
				log = "AI Elevator script place on [This.GetName]"
			}
			else_if = {
				limit = {
					has_major_upgraded_capital = yes
					has_building = building_space_elevator
					NOR = {
						has_building = building_space_elevator_2
						has_building = building_space_elevator_3
					}
				}
				remove_building = building_space_elevator
				add_building = building_space_elevator_2
				log = "AI Elevator script upgrade on [This.GetName]"
			}
			else_if = {
				limit = {
					has_fully_upgraded_capital = yes
					has_building = building_space_elevator_2
					NOT = { has_building = building_space_elevator_3 }
				}
				remove_building = building_space_elevator_2
				add_building = building_space_elevator_3
				log = "AI Elevator script upgrade on [This.GetName]"
			}
			if = {
				limit = {
					OR = {
						last_building_changed = building_research_lab_1
						last_building_changed = building_commercial_zone
						last_building_changed = building_chemical_plant
						last_building_changed = building_refinery
						last_building_changed = building_crystal_plant
					}
					has_oi_space = yes
					has_space_elevator_support = yes
				}
				switch = {
					trigger = last_building_changed
					building_research_lab_1 = {
						if = {
							limit = {
								num_buildings = {  type = building_research_lab_1  value > orbitalinfra_research }
							}
							remove_building = building_research_lab_1
							add_district = district_orbital_platform_research
							change_variable = { which = orbitalinfra_research value = 1 }
							change_variable = { which = orbital_infrastructure value = 1 }
							alloy_ai_orbital_cost = yes
							log = "AI Orbital Research district Swap on [This.GetName]"
						}
					}
					building_commercial_zone = {
						if = {
							limit = {
								num_buildings = {  type = building_commercial_zone  value > orbitalinfra_commercial }
							}
							remove_building = building_commercial_zone
							add_district = district_orbital_platform_commercial
							change_variable = { which = orbitalinfra_commercial value = 1 }
							change_variable = { which = orbital_infrastructure value = 1 }
							alloy_ai_orbital_cost = yes
							log = "AI Orbital Commercial district Swap on [This.GetName]"
						}
					}
					building_chemical_plant = {
						if = {
							limit = {
								num_buildings = {  type = building_chemical_plant  value > orbitalinfra_refinery }
							}
							remove_building = building_chemical_plant
							add_district = district_orbital_platform_refinery
							change_variable = { which = orbitalinfra_refinery value = 1 }
							change_variable = { which = orbital_infrastructure value = 1 }
							alloy_ai_orbital_cost = yes
							log = "AI Orbital Refinery district Swap on [This.GetName]"
						}
					}
					building_refinery = {
						if = {
							limit = {
								num_buildings = {  type = building_refinery  value > orbitalinfra_refinery }
							}
							remove_building = building_refinery
							add_district = district_orbital_platform_refinery
							change_variable = { which = orbitalinfra_refinery value = 1 }
							change_variable = { which = orbital_infrastructure value = 1 }
							alloy_ai_orbital_cost = yes
							log = "AI Orbital Refinery district Swap on [This.GetName]"
						}
					}
					building_crystal_plant = {
						if = {
							limit = {
								num_buildings = {  type = building_crystal_plant  value > orbitalinfra_refinery }
							}
							remove_building = building_crystal_plant
							add_district = district_orbital_platform_refinery
							change_variable = { which = orbitalinfra_refinery value = 1 }
							change_variable = { which = orbital_infrastructure value = 1 }
							alloy_ai_orbital_cost = yes
							log = "AI Orbital Refinery district Swap on [This.GetName]"
						}
					}
				}
			}
		}
	}
}
country_event = {
	id = orbitalinfra.8
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_owned_fleet = {
			limit = {
				has_fleet_flag = orbital_infra_defense
			}
			destroy_fleet = {
				target = this
				kill_leader = no
			}
			orbit = {
				planet_event = { id = orbitalinfra.6 }
			}
		}
	}
}
event = {
	id = orbitalinfra.10
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_country = {
			limit = {
				is_country_type = default
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = has_arcology_project
					}
					has_ascension_perk = ap_arcology_project
				}
				set_country_flag = has_arcology_project
				upgrade_infrastructure_amount = yes
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = has_voidborn
					}
					has_ascension_perk = ap_voidborn
				}
				set_country_flag = has_voidborn
				upgrade_infrastructure_amount = yes
			}
		}
	}
}