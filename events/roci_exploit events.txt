namespace = spaceexploit

planet_event = {
	id = spaceexploit.10000
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		solar_system = {
			random_system_planet = {
				limit = {
					has_planet_flag = exploit_center
				}
				if = {
					limit = {
						has_global_flag = exploitation_logging
					}
					log = "Adding Minor Colony on [ROOT.GetName] for [This.GetName]"
					log = "Minor Colony Count [This.small_colony_count] on [This.GetName]"
					log = "Exploit Constructions [This.exploitation_trade] on [This.GetName]"
				}
			}
		}
		set_variable = { which = exploitation_size value = 0 }
		colonize_exploit_planet = yes
		if = {
			limit = {
				has_global_flag = exploitation_logging
			}
			log = "Size starting [This.exploitation_size] on [This.GetName]"
		}
		solar_system = {
			random_system_planet = {
				limit = {
					has_planet_flag = exploit_center
				}
				if = {
					limit = {
						has_global_flag = exploitation_logging
					}
					log = "Minor Colony Count [This.small_colony_count] on [This.GetName]"
					log = "Exploit Constructions [This.exploitation_trade] on [This.GetName]"
				}
			}
		}
	}
}
#Mineral Mine
planet_event = {
	id = spaceexploit.1
	hide_window = yes
	is_triggered_only = yes
	location = ROOT
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { has_planet_flag = exploit_mine_loop }
			}
			set_planet_flag = exploit_mine_loop
		}
		if = {
			limit = {
				NOT = { has_planet_flag = all_under_construction }
			}
			set_planet_flag = all_under_construction
		}
		if = {
			limit = {
				can_build_exploit = yes
				can_build_exploit_mine = yes
			}
			exploit_start_construction_effect = {
				exploit_type = mines
				exploit_type_batch = mine
			}
		}
		else_if = {
			limit = {
				can_build_exploit_power = yes
				count_deposits = { type = d_energy_1 count < 1 }
				check_variable = { which = exploitation_size value > 1 }
			}
			exploit_start_construction_effect = {
				exploit_type = power
				exploit_type_batch = power
			}
		}
		else_if = {
			limit = {
				check_variable = { which = exploitation_size value < 2 }
			}
		}
		else = {
			planet_event = { id = spaceexploit.1 days = @ConstructionTime }
		}
	}
}
planet_event = {
	id = spaceexploit.102
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		add_deposit = d_minerals_1
		add_deposit = d_minerals_1
		remove_deposit = d_energy_1
		remove_planet_flag = exploit_building_mines
		if = {
			limit = {
				OR = {
					is_planet_class = pc_ice_asteroid
					is_planet_class = pc_asteroid
					is_planet_class = pc_rare_crystal_asteroid
					is_planet_class = pc_broken
					is_planet_class = pc_shattered
					is_planet_class = pc_shattered_2
				}
			}
			add_deposit = d_minerals_1
			add_deposit = d_minerals_1
		}
		if = {
			limit = {
				OR = {
					is_planet_class = pc_molten
					
					#PD
					is_planet_class = pc_diamond
					is_planet_class = pc_volcanic
				}
			}
			add_deposit = d_minerals_1
		}
		if = {
			limit = {
				is_inside_nebula = yes
			}
			add_deposit = d_minerals_1
		}
	}
}

#Power Plant
planet_event = {
	id = spaceexploit.2
	hide_window = yes
	is_triggered_only = yes
	location = ROOT
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { has_planet_flag = exploit_power_loop }
			}
			set_planet_flag = exploit_power_loop
		}
		if = {
			limit = {
				NOT = { has_planet_flag = all_under_construction }
			}
			set_planet_flag = all_under_construction
		}
		if = {
			limit = {
				can_build_exploit_power = yes
			}
			exploit_start_construction_effect = {
				exploit_type = power
				exploit_type_batch = power
			}
		}
		else_if = {
			limit = {
				check_variable = { which = exploitation_size value < 1 }
			}
		}
		else = {
			planet_event = { id = spaceexploit.2 days = @ConstructionTime }
		}
	}
}
planet_event = {
	id = spaceexploit.202
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		add_deposit = d_energy_1
		add_deposit = d_energy_1
		remove_modifier = roci_building_thing
		remove_planet_flag = exploit_building_power
		remove_planet_flag = exploit_power_batch
		if = {
			limit = {
				OR = {
					is_planet_class = pc_gas_giant
					
					#PD
					is_planet_class = pc_ethane_ocean
					is_planet_class = pc_hydrocarbon
					is_planet_class = pc_hot_gas_giant
					is_planet_class = pc_cloudless_gas_giant
					is_planet_class = pc_cold_gas_giant
				}
			}
			add_deposit = d_energy_1
		}
		change_variable = { which = exploitation_size value = -1 }
	}
}


#Alloy Casting
planet_event = {
	id = spaceexploit.4
	hide_window = yes
	is_triggered_only = yes
	location = ROOT
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { has_planet_flag = exploit_alloy_foundry_loop }
			}
			set_planet_flag = exploit_alloy_foundry_loop
		}
		if = {
			limit = {
				NOT = { has_planet_flag = all_under_construction }
			}
			set_planet_flag = all_under_construction
		}
		if = {
			limit = {
				can_build_exploit_alloy_foundry = yes
			}
			exploit_start_construction_effect = {
				exploit_type = foundry
				exploit_type_batch = alloy_foundry
			}
		}
		else_if = {
			limit = {
				can_build_exploit_power = yes
				count_deposits = { type = d_energy_1 count < 1 }
				check_variable = { which = exploitation_size value > 3 }
			}
			exploit_start_construction_effect = {
				exploit_type = power
				exploit_type_batch = power
			}
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						count_deposits = { type = d_minerals_1 count < 2 }
						check_variable = { which = exploitation_size value > 2 }
					}
					AND = {
						count_deposits = { type = d_minerals_1 count < 1 }
						check_variable = { which = exploitation_size value > 1 }				
					}
				}
			}
			exploit_start_construction_effect = {
				exploit_type = mines
				exploit_type_batch = mine
			}
		}
		else_if = {
			limit = {
				check_variable = { which = exploitation_size value < 4 }
			}
		}
		else = {
			set_planet_flag = exploit_building_power
			set_planet_flag = exploit_power_batch
			planet_event = { id = spaceexploit.4 }
			set_variable = { which = exploit_build_time value = @ConstructionTime }
		}
	}
}
planet_event = {
	id = spaceexploit.402
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		add_deposit = d_alloys_1
		remove_deposit = d_energy_1
		remove_deposit = d_minerals_1
		remove_deposit = d_minerals_1
		remove_modifier = roci_building_thing
		remove_planet_flag = exploit_building_foundry
		remove_planet_flag = exploit_alloy_foundry_batch
		change_variable = { which = exploitation_size value = -1 }
	}
}

#Alloy Mining
planet_event = {
	id = spaceexploit.5
	hide_window = yes
	is_triggered_only = yes
	location = ROOT
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { has_planet_flag = exploit_alloy_mine_loop }
			}
			set_planet_flag = exploit_alloy_mine_loop
		}
		if = {
			limit = {
				NOT = { has_planet_flag = all_under_construction }
			}
			set_planet_flag = all_under_construction
		}
		if = {
			limit = {
				can_build_exploit_alloy_mine = yes
			}
			exploit_start_construction_effect = {
				exploit_type = alloys
				exploit_type_batch = alloy_mine
			}
		}
		else_if = {
			limit = {
				can_build_exploit_power = yes
				count_deposits = { type = d_energy_1 count < 1 }
				check_variable = { which = exploitation_size value > 1 }
			}
			exploit_start_construction_effect = {
				exploit_type = power
				exploit_type_batch = power
			}
		}
		else_if = {
			limit = {
				check_variable = { which = exploitation_size value < 2 }
			}
		}
		else = {
			planet_event = { id = spaceexploit.5 days = @ConstructionTime }
		}
	}
}
planet_event = {
	id = spaceexploit.502
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		add_deposit = d_alloys_1
		remove_deposit = d_energy_1
		remove_modifier = roci_building_thing
		remove_planet_flag = exploit_building_alloys
		remove_planet_flag = exploit_alloy_mine_batch
		change_variable = { which = exploitation_size value = -1 }
	}
}

#Volatile Motes
planet_event = {
	id = spaceexploit.7
	hide_window = yes
	is_triggered_only = yes
	location = ROOT
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { has_planet_flag = exploit_motes_loop }
			}
			set_planet_flag = exploit_motes_loop
		}
		if = {
			limit = {
				NOT = { has_planet_flag = all_under_construction }
			}
			set_planet_flag = all_under_construction
		}
		if = {
			limit = {
				can_build_exploit_motes = yes
			}
			exploit_start_construction_effect = {
				exploit_type = motes
				exploit_type_batch = motes
			}
		}
		else_if = {
			limit = {
				can_build_exploit_power = yes
				count_deposits = { type = d_energy_1 count < 1 }
				check_variable = { which = exploitation_size value > 1 }
			}
			exploit_start_construction_effect = {
				exploit_type = power
				exploit_type_batch = power
			}
		}
		else_if = {
			limit = {
				check_variable = { which = exploitation_size value < 2 }
			}
		}
		else = {
			planet_event = { id = spaceexploit.7 days = @ConstructionTime }
		}
	}
}
planet_event = {
	id = spaceexploit.702
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		add_deposit = d_volatile_motes_1
		remove_deposit = d_energy_1
		remove_deposit = d_energy_1
		remove_modifier = roci_building_thing
		remove_planet_flag = exploit_building_motes
		remove_planet_flag = exploit_motes_batch
		ROOT = { change_variable = { which = exploitation_size value = -1 } }
	}
}
#Rare Crystals
planet_event = {
	id = spaceexploit.8
	hide_window = yes
	is_triggered_only = yes
	location = ROOT
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { has_planet_flag = exploit_crystals_loop }
			}
			set_planet_flag = exploit_crystals_loop
		}
		if = {
			limit = {
				NOT = { has_planet_flag = all_under_construction }
			}
			set_planet_flag = all_under_construction
		}
		if = {
			limit = {
				can_build_exploit_crystals = yes
			}
			exploit_start_construction_effect = {
				exploit_type = crystals
				exploit_type_batch = crystals
			}
		}
		else_if = {
			limit = {
				can_build_exploit_power = yes
				count_deposits = { type = d_energy_1 count < 1 }
				check_variable = { which = exploitation_size value > 1 }
			}
			exploit_start_construction_effect = {
				exploit_type = power
				exploit_type_batch = power
			}
		}
		else_if = {
			limit = {
				check_variable = { which = exploitation_size value < 1 }
			}
		}
		else = {
			planet_event = { id = spaceexploit.8 days = @ConstructionTime }
		}
	}
}
planet_event = {
	id = spaceexploit.802
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		add_deposit = d_rare_crystals_1
		remove_deposit = d_energy_1
		remove_deposit = d_energy_1
		remove_modifier = roci_building_thing
		remove_planet_flag = exploit_building_crystals
		remove_planet_flag = exploit_crystals_batch
		ROOT = { change_variable = { which = exploitation_size value = -1 } }
	}
}
#Exotic Gases
planet_event = {
	id = spaceexploit.9
	hide_window = yes
	is_triggered_only = yes
	location = ROOT
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { has_planet_flag = exploit_gases_loop }
			}
			set_planet_flag = exploit_gases_loop
		}
		if = {
			limit = {
				NOT = { has_planet_flag = all_under_construction }
			}
			set_planet_flag = all_under_construction
		}
		if = {
			limit = {
				can_build_exploit_gases = yes
			}
			exploit_start_construction_effect = {
				exploit_type = gases
				exploit_type_batch = gases
			}
		}
		else_if = {
			limit = {
				can_build_exploit_power = yes
				count_deposits = { type = d_energy_1 count < 1 }
				check_variable = { which = exploitation_size value > 1 }
			}
			exploit_start_construction_effect = {
				exploit_type = power
				exploit_type_batch = power
			}
		}
		else_if = {
			limit = {
				check_variable = { which = exploitation_size value < 1 }
			}
		}
		else = {
			planet_event = { id = spaceexploit.9 days = @ConstructionTime }
		}
	}
}
planet_event = {
	id = spaceexploit.902
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		add_deposit = d_exotic_gases_1
		remove_deposit = d_energy_1
		remove_deposit = d_energy_1
		remove_modifier = roci_building_thing 
		remove_planet_flag = exploit_building_gases
		remove_planet_flag = exploit_gases_batch
		ROOT = { change_variable = { which = exploitation_size value = -1 } }
	}
}
#Lava Refinery
planet_event = {
	id = spaceexploit.10
	hide_window = yes
	is_triggered_only = yes
	location = ROOT
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { has_planet_flag = exploit_lava_refinery_loop }
			}
			set_planet_flag = exploit_lava_refinery_loop
		}
		if = {
			limit = {
				NOT = { has_planet_flag = all_under_construction }
			}
			set_planet_flag = all_under_construction
		}
		if = {
			limit = {
				can_build_exploit_lava_refinery = yes
			}
			exploit_start_construction_effect = {
				exploit_type = lava
				exploit_type_batch = lava_refinery
			}
		}
		else_if = {
			limit = {
				check_variable = { which = exploitation_size value < 1 }
			}
		}
		else = {
			planet_event = { id = spaceexploit.10 days = @ConstructionTime }
		}
	}
}
planet_event = {
	id = spaceexploit.1002
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		add_deposit = d_minerals_1
		add_deposit = d_minerals_1
		add_deposit = d_energy_1
		remove_modifier = roci_building_thing
		remove_planet_flag = exploit_building_lava
		remove_planet_flag = exploit_lava_refinery_batch
		random_list = {
			3 = {
				add_deposit = d_alloys_1
			}
			1 = { }
		}
		ROOT = { change_variable = { which = exploitation_size value = -1 } }
	}
}

#Research Labs
planet_event = {
	id = spaceexploit.12
	hide_window = yes
	is_triggered_only = yes
	location = ROOT
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { has_planet_flag = exploit_research_loop }
			}
			set_planet_flag = exploit_research_loop
		}
		if = {
			limit = {
				NOT = { has_planet_flag = all_under_construction }
			}
			set_planet_flag = all_under_construction
		}
		if = {
			limit = {
				can_build_exploit_research = yes
			}
			exploit_start_construction_effect = {
				exploit_type = research
				exploit_type_batch = research
			}
		}
		else_if = {
			limit = {
				can_build_exploit_power = yes
				count_deposits = { type = d_energy_1 count < 2 }
				check_variable = { which = exploitation_size value > 1 }
			}
			exploit_start_construction_effect = {
				exploit_type = power
				exploit_type_batch = power
			}
		}
		else_if = {
			limit = {
				check_variable = { which = exploitation_size value < 2 }
			}
		}
		else = {
			planet_event = { id = spaceexploit.12 days = @ConstructionTime }
		}
	}
}
planet_event = {
	id = spaceexploit.1202
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		add_deposit = d_society_1
		add_deposit = d_physics_1
		add_deposit = d_engineering_1
		remove_deposit = d_energy_1
		remove_deposit = d_energy_1
		remove_modifier = roci_building_thing
		remove_planet_flag = exploit_building_research
		remove_planet_flag = exploit_research_batch
		if = {
			limit = {
				OR = {
					is_planet_class = pc_gas_giant
					is_planet_class = pc_barren
					is_planet_class = pc_barren_cold
					
					#PD
					is_planet_class = pc_hot_gas_giant
					is_planet_class = pc_cloudless_gas_giant
					is_planet_class = pc_cold_gas_giant
				}
			}
			add_deposit = d_physics_1
		}
		if = {
			limit = {
				OR = {
					is_planet_class = pc_molten
					is_planet_class = pc_frozen
					
					#PD
					is_planet_class = pc_iron
				}
			}
			add_deposit = d_engineering_1 
		}
		if = {
			limit = {
				OR = {
					is_planet_class = pc_toxic
					
					#PD
					is_planet_class = pc_hothouse
					is_planet_class = pc_subglacial
				}
			}
			add_deposit = d_society_1 
		}
		ROOT = { change_variable = { which = exploitation_size value = -1 } }
	}
}

planet_event = {
	id = spaceexploit.20
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		#always = no
		exists = space_owner
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		exploit_build_time_calc = yes
	}
}


#Unused event, apparently
planet_event = {
	id = spaceexploit.30
	hide_window = yes
	is_triggered_only = yes
	location = ROOT
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		solar_system = {
			if = {
				limit = {
					any_system_planet = {
						has_planet_flag = exploit_center
					}
				}
				every_system_planet = {
					limit = {
						has_planet_flag = exploit_center
						owner = {
							is_gestalt = no
						}
					}
					add_deposit = space_ex_construction_1
					change_variable = { which = exploitation_trade value = 1 }
				}
				every_system_planet = {
					limit = {
						has_planet_flag = exploit_center
						owner = {
							is_gestalt = yes
						}
					}
					add_deposit = space_ex_construction_1
					change_variable = { which = exploitation_trade value = 1 }
				}
			}
		}
	}
}

country_event = {
	id = spaceexploit.32
	#title = "spaceexploit.1.name"
	#desc = "spaceexploit.1.desc"
	#picture = GFX_evt_asteroid_approaching_planet
	is_triggered_only = yes
	#location = FROM
	#auto_opens = no
	hide_window = yes
	
	trigger = {
		always = no
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
	}
	#option = {
	#	name = "Next project!"
	#}
}

country_event = {
	id = spaceexploit.33
	#title = "spaceexploit.2.name"
	#desc = "spaceexploit.2.desc"
	#picture = GFX_evt_asteroid_approaching_planet
	is_triggered_only = yes
	#location = FROM
	#auto_opens = no
	hide_window = yes
	
	trigger = {
		always = no
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
	}
	#option = {
	#	name = "Next project!"
	#}
}

country_event = {
	id = spaceexploit.35
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		capital_scope = {
			if = {
				limit = {
					has_global_flag = exploitation_logging
				}
				log = "Minor Colony Count [This.small_colony_count] on [This.GetName]"
				log = "Exploit Constructions [This.exploitation_trade] on [This.GetName]"
			}
			set_variable = { which = colonytemp value = small_colony_count }
			set_variable = { which = exploittemp value = exploitation_trade }
			every_deposit = {
				if = {
					limit = {
						OR = {
							is_deposit_type = d_trade_value_1
							is_deposit_type = space_ex_construction_1
							is_deposit_type = d_small_colonies
						}
					}
					remove_deposit = yes
				}
			}
		}
	}
	after = {
		capital_scope = {
			if = {
				limit = {
					has_global_flag = exploitation_logging
				}
				log = "Minor Colony Count [This.colonytemp] on [This.GetName]"
				log = "Exploit Constructions [This.exploittemp] on [This.GetName]"
			}
			while = {
				count = 10000
				limit = {
					check_variable = { which = exploittemp value > 0 }
				}
				change_variable = { which = exploittemp value = -1 }
				add_deposit = space_ex_construction_1
			}
			while = {
				count = 50
				limit = {
					check_variable = { which = colonytemp value > 0 }
				}
				change_variable = { which = colonytemp value = -1 }
				add_deposit = d_small_colonies
			}
		}
	}
}

country_event = {
	id = spaceexploit.37
	is_triggered_only = yes
	hide_window = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		#Ensure there are at least 2 molten worlds, and strip all their research deposits
		capital_scope = {
			solar_system = {
				if = {
					limit = {
						count_system_planet = {
							count < 2
							limit = { is_planet_class = pc_molten }
						}
					}
					every_system_planet = {
						export_trigger_value_to_variable = {
							trigger = distance
							variable = roci_planet_distance
							parameters = {
								source = prev.star
								type = euclidean
								same_solar_system = yes
							}
						}
					}
					every_system_planet = {
						limit = {
							is_star = yes
						}
						prev = {
							every_system_planet = {
								export_trigger_value_to_variable = {
									trigger = distance
									variable = roci_planet_distance_temp
									parameters = {
										source = prevprev
										type = euclidean
										same_solar_system = yes
									}
								}
							}
							if = {
								limit = {
									check_variable = { which = roci_planet_distance value > roci_planet_distance_temp }
								}
								set_variable = { which = roci_planet_distance value = roci_planet_distance_temp }
							}
						}
					}
					
					while = {
						count = 2
						limit = {
							count_system_planet = {
								count < 2
								limit = { is_planet_class = pc_molten }
							}
						}
						ordered_system_planet = {
							limit = {
								OR = {
									is_planet_class = pc_barren
									is_planet_class = pc_barren_cold
									is_planet_class = pc_frozen
									is_planet_class = pc_toxic
								}
							}
							position = 0
							order_by = roci_planet_distance
							inverse = yes
							change_pc = pc_molten
							every_deposit = { limit = { PREV = { has_deposit_for = shipclass_research_station } } remove_deposit = yes }
							if = {
								limit = {
									has_research_station = yes
								}
								research_station = {
									dismantle = yes
								}
							}
						}
					}
				}
			}
		}
		log = "Exploit Colonies for [This.GetName]"
		set_country_flag = exploit_gas_giant_off
		set_country_flag = exploit_motes_off
		set_country_flag = exploit_gases_off
		set_country_flag = exploit_crystals_off
		exploit_set_variables = yes
		export_to_exploit_variables = yes
		game_start_colonies = yes
	}
	
	after = {
		if = {
			limit = {
				has_global_flag = no_realdev
			}
			set_variable = { which = realdev_minor_colony_speed value = 1 }
		}
		every_planet_within_border = {
			limit = {
				has_modifier = colonized_planet
				has_deposit_for = shipclass_mining_station
			}
			log = "Created Mining Station on [This.GetName] for [PREV.GetName]"
			create_mining_station = {
				owner = ROOT
			}
		}
		every_planet_within_border = {
			limit = {
				has_modifier = colonized_planet
				has_deposit_for = shipclass_research_station
			}
			log = "Created Research Station on [This.GetName] for [PREV.GetName]"
			create_research_station = {
				owner = ROOT
			}
		}
	}
}

country_event = {
	id = spaceexploit.40
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		if = {
			limit = {
				NOT = { has_global_flag = no_exploit }
				OR = {
					last_increased_tech = tech_starbase_3
					last_increased_tech = tech_starbase_4
					last_increased_tech = tech_starbase_5
					last_increased_tech = tech_habitat_1
					last_increased_tech = tech_habitat_2
					last_increased_tech = tech_habitat_3
				}
			}
			every_planet_within_border = {
				limit = {
					has_modifier = colonized_planet
				}
				random_list = {
					10 = {
						planet_event = { id = spaceexploit.42 days = 10 }
					}
					10 = {
						planet_event = { id = spaceexploit.42 days = 40 }
					}
					10 = {
						planet_event = { id = spaceexploit.42 days = 70 }
					}
					10 = {
						planet_event = { id = spaceexploit.42 days = 100 }
					}
				}
			}
		} 
	}
}

event = {
	id = spaceexploit.41
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		every_country = {
			if = {
				limit = {
					NOT = {
						has_country_flag = has_arcology_project_exploit
					}
					has_ascension_perk = ap_arcology_project
				}
				set_country_flag = has_arcology_project_exploit
				every_planet_within_border = {
					limit = {
						has_modifier = colonized_planet
					}
					random_list = {
						10 = {
							planet_event = { id = spaceexploit.42 days = 10 }
						}
						10 = {
							planet_event = { id = spaceexploit.42 days = 40 }
						}
						10 = {
							planet_event = { id = spaceexploit.42 days = 70 }
						}
						10 = {
							planet_event = { id = spaceexploit.42 days = 100 }
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_country_flag = has_voidborn_exploit
					}
					has_ascension_perk = ap_voidborn
				}
				set_country_flag = has_voidborn_exploit
				every_planet_within_border = {
					limit = {
						has_modifier = colonized_planet
					}
					random_list = {
						10 = {
							planet_event = { id = spaceexploit.42 days = 10 }
						}
						10 = {
							planet_event = { id = spaceexploit.42 days = 40 }
						}
						10 = {
							planet_event = { id = spaceexploit.42 days = 70 }
						}
						10 = {
							planet_event = { id = spaceexploit.42 days = 100 }
						}
					}
				}
			}
		}
	}
}

planet_event = {
	id = spaceexploit.42
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = no_exploit }
	}
	
	immediate = {
		upgrade_exploit_size = yes
	}
	after = {
		ai_colony_switch = yes	
	}
}